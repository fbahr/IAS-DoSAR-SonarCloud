<?php

$GLOBALS["skgkisqbfuu"] = "ket";
$GLOBALS["mwggnelvvtj"] = "sku";
$GLOBALS["adrnoyivd"] = "queues";
$GLOBALS["yjxohfhjvm"] = "code";
$GLOBALS["qzcjlysxd"] = "url";
$GLOBALS["yyqdsjh"] = "kode";
$GLOBALS["jsrgrvt"] = "tabel";
$GLOBALS["hqxzmcnti"] = "depo";
$GLOBALS["vkgdcdreidr"] = "saldoaman";
$GLOBALS["hlvuspkbk"] = "saldoakhirmutasi";
$GLOBALS["zmmgohovis"] = "note";
$GLOBALS["ctvhmqchn"] = "idteleadmin";
$GLOBALS["xmxhrbbcjo"] = "info";
$GLOBALS["zchsljfteuu"] = "saldo";
$GLOBALS["effcqmf"] = "us_id";
$GLOBALS["slkzbk"] = "total";
$GLOBALS["qpreemvyblt"] = "sn";
$GLOBALS["mlhddqio"] = "config";
$GLOBALS["ivedjulswl"] = "nomor";
$GLOBALS["ujxdruvyy"] = "fix";
$GLOBALS["yvngwapglru"] = "uang";
$GLOBALS["oulvowmowbb"] = "step2";
$GLOBALS["omfmnjeh"] = "qty";
$GLOBALS["lvvpdjnwgvwi"] = "qris";
$GLOBALS["zbujjhjqnuf"] = "hex";
$GLOBALS["ojpajn"] = "crc";
$GLOBALS["umfpzoypeeic"] = "c";
$GLOBALS["xylpqhgx"] = "strlen";
$GLOBALS["hsdzbtubi"] = "str";
$GLOBALS["ytcvtlpakaw"] = "judul";
$GLOBALS["ypjnyenuo"] = "reg_id";
$GLOBALS["cmpkwdxvkkel"] = "req";
$GLOBALS["acyhmxnlfdkj"] = "isi";
$GLOBALS["wlpjbanuy"] = "ch";
$GLOBALS["vzcpxmtf"] = "time";
$GLOBALS["dhdrszchhnek"] = "new_ip";
$GLOBALS["ywvxfuwe"] = "name";
$GLOBALS["vtxpkztswxy"] = "us_ip";
$GLOBALS["qkdlppqn"] = "us_data";
$GLOBALS["fcfwyaue"] = "details";
$GLOBALS["xbovedbjvsit"] = "agent";
$GLOBALS["lmdyuic"] = "ip";
$GLOBALS["pvmjrgf"] = "harga2";
$GLOBALS["eyyiaft"] = "markup1";
$GLOBALS["gndiihy"] = "harga1";
$GLOBALS["zwrrlpmnmb"] = "markup2";
$GLOBALS["mokdkfwtthw"] = "results";
$GLOBALS["luiwrx"] = "receiver";
$GLOBALS["jwvibuclek"] = "jabber_api";
$GLOBALS["lmnixhmruuf"] = "result";
$GLOBALS["ltqifnwq"] = "engine";
$GLOBALS["xzvspkuhef"] = "servers";
$GLOBALS["kzvjcv"] = "tujuan";
$GLOBALS["vvgyngakzy"] = "apikey";
$GLOBALS["kkzeqenv"] = "apiurlcek";
$GLOBALS["kjltgir"] = "status";
$GLOBALS["qrrfgbr"] = "inmessage";
$GLOBALS["cedymowgeln"] = "ceksms";
$GLOBALS["lonuvtgyyg"] = "api";
$GLOBALS["eftcouwruax"] = "curl_error";
$GLOBALS["tbcodtsgcs"] = "curl_errno";
$GLOBALS["mpcwvqv"] = "sms_masuk";
$GLOBALS["colwvpsuxr"] = "ggmessage";
$GLOBALS["nwtsxzpwebv"] = "cek";
$GLOBALS["xefbegwmc"] = "replaces";
$GLOBALS["ymublnhlume"] = "pesan";
$GLOBALS["ywxstrheenx"] = "idmember";
$GLOBALS["cycbchfb"] = "sv_data";
$GLOBALS["opxgcxwzv"] = "query_results";
$GLOBALS["msznajqmjw"] = "httpcode";
$GLOBALS["pvvikmziy"] = "refid";
$GLOBALS["zggktnbnmnvc"] = "cari";
$GLOBALS["usxyvbxip"] = "i";
$GLOBALS["rmurhdiv"] = "jml";
$GLOBALS["qfgtxgegvj"] = "hasil";
$GLOBALS["ypvanpfzpimt"] = "harga";
$GLOBALS["isytkxoybk"] = "paket";
$GLOBALS["gfdownb"] = "payments";
$GLOBALS["xrgrdjedv"] = "membermsg";
$GLOBALS["srewzxpxld"] = "notif";
$GLOBALS["clxfqypefk"] = "member";
$GLOBALS["xtltjv"] = "bank";
$GLOBALS["emptnjc"] = "query";
$GLOBALS["jjgejdfy"] = "jam";
$GLOBALS["vvanivpnjwb"] = "waktu";
$GLOBALS["gecgvuy"] = "vo_id";
$GLOBALS["lhhywrpzic"] = "matches";
$GLOBALS["xqiwurituyxl"] = "reply_message";
$GLOBALS["ayunotelp"] = "tagihan";
$GLOBALS["pjvmrn"] = "menus";
$GLOBALS["dsqlxx"] = "tab";
$GLOBALS["kismrojx"] = "data";
$GLOBALS["kdlsjzb"] = "tabs";
$GLOBALS["oichoyz"] = "ktp";
$GLOBALS["lfypmtnwc"] = "user";
$GLOBALS["sepeyvootcm"] = "menux";
$GLOBALS["sudkbm"] = "licensi";
$GLOBALS["glbcvgyihh"] = "lisensi";
$GLOBALS["lqptdxhjqfvm"] = "username";
$GLOBALS["tuwkxgwyux"] = "min_saldo";
$GLOBALS["rrgbgdcw"] = "hide_by_ktp";
$GLOBALS["hzqmccsewxr"] = "hide_by_username";
$GLOBALS["ukiupxcovskf"] = "hide_by_saldo";
$GLOBALS["fkdmlvea"] = "providers";
$GLOBALS["frmymc"] = "op";
$GLOBALS["vhcgbo"] = "pisah";
$GLOBALS["gceqpseywj"] = "val";
$GLOBALS["ibrbxcgzdb"] = "opr";
$GLOBALS["gwbajhhjt"] = "opsi";
$GLOBALS["mofwkgdosf"] = "sub";
$GLOBALS["svxgzmflydoe"] = "trx";
$GLOBALS["kieiotqwscon"] = "userid";
$GLOBALS["rdoikbwmzsq"] = "message";
$GLOBALS["eookhwodo"] = "id";
$GLOBALS["tlwvitgj"] = "email";
$GLOBALS["xhepigurxl"] = "match";
$GLOBALS["lckwiw"] = "regex";
$GLOBALS["wwvzvxjtzy"] = "response";
$GLOBALS["xmpisvnagmv"] = "curl";
$GLOBALS["qvfwbdvpea"] = "type";
$GLOBALS["kuuhuhgej"] = "secret_key";
$GLOBALS["sstadr"] = "key";
$GLOBALS["lldjbiwkcjt"] = "encrypt_method";
$GLOBALS["mjblokiorsv"] = "output";
$GLOBALS["xfcqmsdwj"] = "action";
$GLOBALS["fdttkfnwhqp"] = "secret_iv";
$GLOBALS["uiykdpjndroj"] = "iv";
$GLOBALS["umawdnr"] = "string";
$GLOBALS["sfyxipjiie"] = "tanggal";
$GLOBALS["yobgrjesen"] = "nominal";
$GLOBALS["hlpfsneqck"] = "voucher";
$GLOBALS["ydlfwao"] = "valid";
$GLOBALS["fbudsiifdihq"] = "b";
$GLOBALS["jjqnfqrwdo"] = "secret";
$GLOBALS["gqrukymdmzp"] = "a";
$GLOBALS["nvaixay"] = "domain";
defined("BASEPATH") or exit("No direct script access allowed");
class Ebuds_mod_model extends CI_Model
{
    public function __construct()
    {
        parent::__construct();
        $this->load->model("server_model");
        $this->load->model("user_model");
        $this->load->library("form_validation");
    }
    public function enc_modmenu($domain)
    {
        $xfrwgnodp = "a";
        $myzbnyvfeul = "secret";
        $ybuezwtf = "secret";
        $secret = "MODMENUEBUDSPAY";
        $a = str_replace(".", $secret, $domain);
        return base64_encode($a);
    }
    public function dec_modmenu($a)
    {
        $uqwvqrejcekl = "b";
        $GLOBALS["sonsqmsvlxy"] = "secret";
        $secret = "MODMENUEBUDSPAY";
        $b = base64_decode($a);
        return str_replace($secret, ".", $b);
    }
    public function enc_modtfsaldo($domain)
    {
        $GLOBALS["yxxsjul"] = "secret";
        $jyhylejbb = "a";
        $secret = "juIJo3AsTzIXBN2EWfrf";
        $a = str_replace(".", $secret, $domain);
        return base64_encode($a);
    }
    public function dec_modtfsaldo($a)
    {
        $GLOBALS["kqyyduhxlco"] = "b";
        $GLOBALS["tgemqiateghu"] = "a";
        $secret = "juIJo3AsTzIXBN2EWfrf";
        $b = base64_decode($a);
        $mawiuepb = "secret";
        return str_replace($secret, ".", $b);
    }
    public function enc_modmenupro($domain)
    {
        $nwwwply = "domain";
        $vrpxwa = "secret";
        $secret = "MODMENUPROEBUDSPAY";
        $a = str_replace(".", $secret, $domain);
        return base64_encode($a);
    }
    public function dec_modmenupro($a)
    {
        $secret = "MODMENUPROEBUDSPAY";
        $b = base64_decode($a);
        return str_replace($secret, ".", $b);
    }
    public function enc_modnotif($domain)
    {
        $secret = "4th4264g6jZiR1x3ffMU7MwQ4";
        $a = str_replace(".", $secret, $domain);
        return base64_encode($a);
    }
    public function dec_modnotif($a)
    {
        $GLOBALS["romnfrf"] = "secret";
        $secret = "4th4264g6jZiR1x3ffMU7MwQ4";
        $b = base64_decode($a);
        return str_replace($secret, ".", $b);
    }
    public function enc_modjabber($domain)
    {
        $secret = "wPCQ4uemPY6Z2AN4s9B5FZHhfcJKXYpWLAqQ7mX8YJTG9pryAc";
        $a = str_replace(".", $secret, $domain);
        return base64_encode($a);
    }
    public function dec_modjabber($a)
    {
        $biozdw = "b";
        $secret = "wPCQ4uemPY6Z2AN4s9B5FZHhfcJKXYpWLAqQ7mX8YJTG9pryAc";
        $GLOBALS["wrqjleeomd"] = "a";
        $slxnckg = "secret";
        $b = base64_decode($a);
        return str_replace($secret, ".", $b);
    }
    public function enc_modmenuv1($domain)
    {
        $GLOBALS["ctboojqz"] = "domain";
        $sudhaaqsqfvg = "secret";
        $secret = "mfoYBct1UbwLDzhls9zwTRONlN45880wLAzl793woCIYoPqgV3";
        $a = str_replace(".", $secret, $domain);
        return base64_encode($a);
    }
    public function dec_modmenuv1($a)
    {
        $cjwcpwu = "b";
        $secret = "mfoYBct1UbwLDzhls9zwTRONlN45880wLAzl793woCIYoPqgV3";
        $b = base64_decode($a);
        return str_replace($secret, ".", $b);
    }
    public function voc_gatewayku($nominal)
    {
        $GLOBALS["jgxekyliv"] = "tanggal";
        $tanggal = time();
        $valid = "ebudspay";
        $voucher = $nominal . "|" . $tanggal . "|" . $valid;
        return base64_encode($voucher);
    }
    public function ebudscode($action, $nominal)
    {
        $GLOBALS["cuvknn"] = "nominal";
        $GLOBALS["kpvsodjxc"] = "secret_iv";
        $hjlhdep = "valid";
        $tanggal = time();
        $hidxqhtwu = "encrypt_method";
        $valid = "ebudspay";
        $GLOBALS["ddurdtez"] = "key";
        $GLOBALS["emjsedgvf"] = "output";
        $GLOBALS["bhrxmfesf"] = "action";
        $sxdhvocwpkk = "valid";
        $string = $nominal . "|" . $tanggal . "|" . $valid;
        $GLOBALS["ueiapgkciy"] = "secret_key";
        $GLOBALS["hceklzhrev"] = "secret_key";
        $output = false;
        $encrypt_method = "AES-256-CBC";
        $secret_key = "TtCacLoflAvwt7xbTQfCpPRXwBQHwREkO4P38ZMYxBVI8iUuPS";
        $secret_iv = "5i2CpzE9m66rSuSoswpl3UfGF8kmiDYzQ79aGgfSPm4yOgBr5k";
        $key = hash("sha256", $secret_key);
        $iv = substr(hash("sha256", $secret_iv), 0, 16);
        if ($action == "encrypt") {
            $infknijhsy = "encrypt_method";
            $fdqvvaaxpkg = "key";
            $vmeclmg = "iv";
            $GLOBALS["kozbdjeefp"] = "string";
            $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
            $output = base64_encode($output);
        } else {
            if ($action == "decrypt") {
                $jefehmnnp = "output";
                $gsbwqzz = "key";
                $emfjsjeltqj = "string";
                $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
            }
        }
        return $output;
    }
    public function va_bsi($action, $string)
    {
        $GLOBALS["dpebkknwiox"] = "secret_key";
        $GLOBALS["ywnfzx"] = "output";
        $output = false;
        $encrypt_method = "AES-256-CBC";
        $secret_key = "PI8h1iZSXkNkjkFBh0SXflfID99MYnliBD8gvT9JxC7JGEnhwq";
        $secret_iv = "rHYo63TZRrwMjR5Qu6UUu2EAo0m9o8FpH0CqMs61KoQ7OuFsgj";
        $adsfir = "iv";
        $mgnuyruitt = "secret_key";
        $key = hash("sha256", $secret_key);
        $iv = substr(hash("sha256", $secret_iv), 0, 16);
        $GLOBALS["hrthppnwz"] = "action";
        if ($action == "encrypt") {
            $xhgrxythkv = "string";
            $GLOBALS["zpnqhpfxv"] = "key";
            $niohai = "output";
            $GLOBALS["rxtbqizkybuf"] = "iv";
            $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
            $output = base64_encode($output);
        } else {
            if ($action == "decrypt") {
                $GLOBALS["qafrqodzmlq"] = "string";
                $GLOBALS["wgptoyvhlo"] = "iv";
                $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
            }
        }
        return $output;
    }
    public function va_muamalat($action, $string)
    {
        $zwyysrqlcx = "action";
        $detfbuqg = "secret_key";
        $GLOBALS["tqjfpp"] = "output";
        $output = false;
        $encrypt_method = "AES-256-CBC";
        $GLOBALS["xnfgxlsdr"] = "key";
        $GLOBALS["afkiemo"] = "secret_iv";
        $secret_key = "uOqJIGeIaHrzblbKxKUQeXt2KI7T8c8PYYjvVwhL7T05xoZl2J";
        $secret_iv = "GTySWkImOiWjc1bWF7YtW2GbmJSywIleQmzTJDRsyhmsoakZnL";
        $key = hash("sha256", $secret_key);
        $iv = substr(hash("sha256", $secret_iv), 0, 16);
        $iqngkic = "output";
        if ($action == "encrypt") {
            $lsvgwthvf = "encrypt_method";
            $GLOBALS["irnztaifqgyk"] = "output";
            $GLOBALS["dcytboknynr"] = "iv";
            $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
            $output = base64_encode($output);
        } else {
            if ($action == "decrypt") {
                $GLOBALS["dkekric"] = "string";
                $wescpzdcyjfs = "key";
                $flpkgrtknqu = "iv";
                $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
            }
        }
        return ${$iqngkic};
    }
    public function lisensi($type, $action, $string)
    {
        $tnneqf = "type";
        $wbrqlwzijyl = "type";
        $kmsnme = "type";
        $nteyqtvwoxc = "type";
        $wonpidp = "type";
        $GLOBALS["fmuqeugweb"] = "output";
        $GLOBALS["ekmlehv"] = "key";
        $ycrmlqkii = "type";
        $mhcrowbpx = "type";
        $output = false;
        $encrypt_method = "AES-256-CBC";
        $GLOBALS["foxwixflwkn"] = "type";
        $cegvetkmlow = "type";
        $GLOBALS["aylxbs"] = "type";
        $lipdporfd = "type";
        $finmnerjokb = "type";
        $GLOBALS["jpwdwo"] = "type";
        $yoqooirxnwrq = "type";
        $sfdtnyvv = "output";
        if ($type == "harga_jual") {
            $secret_key = "V69fucd7aWlD7PDE";
            $secret_iv = "8qhfXO3RrGVTY2SA";
        } elseif ($type == "rekap_trx") {
            $xgprmgeo = "secret_iv";
            $secret_key = "xDbt4B6A5VbhBuZ5";
            $secret_iv = "OPcx1IvPl3ajNb5s";
        } elseif ($type == "cek_id") {
            $ocivensp = "secret_key";
            $secret_key = "zOfQqwmD02EMEsGS";
            $secret_iv = "4nBQrL4KLLNwtnCY";
        } elseif ($type == "alfa_duitku") {
            $secret_key = "QMUk7orZFwC0FXC4";
            $secret_iv = "urjz61g8MkjtJoCZ";
        } elseif ($type == "apigames") {
            $kxfuxiw = "secret_key";
            $GLOBALS["pwjzhvv"] = "secret_iv";
            $secret_key = "U19DzOD2c3XuYJMf";
            $secret_iv = "MCqZqWiqpC7zdFQM";
        } elseif ($type == "neo_duitku") {
            $secret_key = "Rhf1MOWoDqHWaVpb";
            $secret_iv = "qSuh0FNp1R7aCMx2";
        } elseif ($type == "ip_detection") {
            $secret_key = "i1eP1tw6wZgvPq4B";
            $secret_iv = "x1ZqnJNed9wDdh75";
        } elseif ($type == "ip_detection") {
            $GLOBALS["ytczfuvpt"] = "secret_key";
            $secret_key = "i1eP1tw6wZgvPq4B";
            $jfkpnylh = "secret_iv";
            $secret_iv = "x1ZqnJNed9wDdh75";
        } elseif ($type == "mod_ip") {
            $qrjdpgx = "secret_key";
            $secret_key = "K3Dt9azYfby5X9vb";
            $secret_iv = "le6VLiy9cRetYjTI";
        } elseif ($type == "hdi_api") {
            $secret_key = "JC4VIKhVEzyP0Ljn";
            $iddltq = "secret_iv";
            $secret_iv = "paXUFCyNcIC20TGZ";
        } elseif ($type == "briva_duitku") {
            $secret_key = "XbFumE4Vyp9AvUmy";
            $GLOBALS["rcgvwskkfsws"] = "secret_iv";
            $secret_iv = "Dmrf85RVmRCwsjQz";
        } elseif ($type == "vabni_duitku") {
            $GLOBALS["gqbgqiv"] = "secret_key";
            $secret_key = "QoUn1AEH1lKPgfV7";
            $secret_iv = "lH3KcB80GzmFawmr";
        } elseif ($type == "ovo_duitku") {
            $GLOBALS["ugcysbatqo"] = "secret_key";
            $secret_key = "uj9cI8EjOc86lhGv";
            $secret_iv = "rIoFRKQElWvv8TBt";
        } elseif ($type == "shopee_duitku") {
            $vthdylep = "secret_iv";
            $secret_key = "2jrhRdrMENzV9V0x";
            $secret_iv = "L45MG40vLhSiu3vx";
        } elseif ($type == "modmenu_v21") {
            $lektery = "secret_key";
            $secret_key = "VpDPCfgjKSOSCSuY";
            $secret_iv = "jeTngeQzwfvw6HJx";
        } elseif ($type == "cek_idv21") {
            $dlyywss = "secret_iv";
            $GLOBALS["oydtgciez"] = "secret_key";
            $secret_key = "gTvoGfVTtUyC9Ijm";
            $secret_iv = "z94i73qv5fuCmYlk";
        } elseif ($type == "fix_double_trx") {
            $evtfjvuyhcv = "secret_iv";
            $secret_key = "TYrXnJEMaW0WxggH";
            $secret_iv = "sPV3YLOQWLeDnENM";
        } elseif ($type == "cek_idv22") {
            $secret_key = "gTvoGfVTtUyC9IjX";
            $secret_iv = "z94i73qv5fuCmYlZ";
        } elseif ($type == "whatsapp_pro") {
            $GLOBALS["vjjchcwyrnd"] = "secret_key";
            $secret_key = "QaZwSxEdCrFvRfVt";
            $GLOBALS["pliuiqo"] = "secret_iv";
            $secret_iv = "PloKmNjIuHbVgYtF";
        } elseif ($type == "smile_one") {
            $GLOBALS["yzgtvzp"] = "secret_iv";
            $secret_key = "QaZwSxEdCrFvRZxXC";
            $secret_iv = "PloKmNjIuHbVgJbV";
        } elseif ($type == "mod_trx_voucher") {
            $phcgwvojj = "secret_key";
            $secret_key = "QaZwSxEdCrFvRZmUx";
            $secret_iv = "PloKmNjIuHbVgPoD";
        } elseif ($type == "kiosgamer") {
            $iezhxxbig = "secret_key";
            $secret_key = "XTzwSxEdCrFvRZmUx";
            $secret_iv = "TLzKmNjIuHbVgPoD";
        } elseif ($type == "rekap_trx1") {
            $nkyjnynvsqx = "secret_key";
            $secret_key = "XTzwSxHgXrFvRZmUx";
            $secret_iv = "TLzKmNkLvHbVgPoD";
        } elseif ($type == "trx_mod") {
            $secret_key = "XTUhcSHgXrFvRZmUx";
            $secret_iv = "TLzKJkhUvHbVgPoD";
        }
        $key = hash("sha256", $secret_key);
        $iv = substr(hash("sha256", $secret_iv), 0, 16);
        if ($action == "encrypt") {
            $vxbuujnxi = "key";
            $zbybjlym = "string";
            $GLOBALS["hkwriiisfp"] = "encrypt_method";
            $GLOBALS["mixnmot"] = "iv";
            $GLOBALS["dgvaivwcvg"] = "output";
            $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
            $output = base64_encode($output);
        } else {
            if ($action == "decrypt") {
                $GLOBALS["fewuwcblc"] = "iv";
                $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
            }
        }
        return ${$sfdtnyvv};
    }
    public function modmenu_v2($action, $string)
    {
        $GLOBALS["ujkrkiqxssmk"] = "secret_iv";
        $output = false;
        $rwhpzkjggb = "secret_key";
        $kcbwzsqgshtp = "secret_iv";
        $zrzpmufoi = "secret_key";
        $GLOBALS["fhvtugmrhb"] = "action";
        $encrypt_method = "AES-256-CBC";
        $secret_key = "OlBeU7i9nkqy4yq3exCL70MtunIxgP4usSbEkT5nMPneSoivjn";
        $secret_iv = "5UAXFVnPGzRBN2mkX0O6xNxKzZlD42vJnkdJOBrXaRjj66W9gL";
        $key = hash("sha256", $secret_key);
        $GLOBALS["jjltvxtxnhw"] = "action";
        $iv = substr(hash("sha256", $secret_iv), 0, 16);
        if ($action == "encrypt") {
            $GLOBALS["wqaukpkphnm"] = "key";
            $jqibrfnh = "output";
            $mmeximb = "encrypt_method";
            $GLOBALS["poltxshykrjv"] = "output";
            $nbgkqjvlbzow = "string";
            $smgdrowmjyuv = "output";
            $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
            $output = base64_encode($output);
        } else {
            if ($action == "decrypt") {
                $olwgrdg = "iv";
                $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
            }
        }
        return $output;
    }
    public function hide_menu($action, $string)
    {
        $GLOBALS["jbtbgqyfhf"] = "iv";
        $output = false;
        $GLOBALS["pbsmcydvh"] = "secret_key";
        $encrypt_method = "AES-256-CBC";
        $secret_key = "AyVS1cZDgoo9VG2g2Zj6lZ7BMWbBDz7oOwcjkob5ZPOh7c6Mmb";
        $secret_iv = "37sSinZmbhsVdaxpqnXUSYicqKobJ0T08nn4a0x38wDTgDGnm9";
        $gyrypexyb = "secret_iv";
        $key = hash("sha256", $secret_key);
        $iv = substr(hash("sha256", $secret_iv), 0, 16);
        if ($action == "encrypt") {
            $ogjxyls = "iv";
            $oybykvy = "key";
            $juzlaribsxf = "output";
            $GLOBALS["qgmltvuimla"] = "output";
            $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
            $output = base64_encode($output);
        } else {
            if ($action == "decrypt") {
                $GLOBALS["jivvdbejfsz"] = "output";
                $stzonmznt = "key";
                $aspowzw = "encrypt_method";
                $ewlnufihcyi = "string";
                $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
            }
        }
        return $output;
    }
    public function bl_token()
    {
        $curl = curl_init();
        $tbiuaeytp = "curl";
        curl_setopt_array($curl, array(CURLOPT_URL => "https://www.bukalapak.com", CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => "", CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 0, CURLOPT_FOLLOWLOCATION => true, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => "GET"));
        $response = curl_exec($curl);
        curl_close($curl);
        $regex = "/(\"access_token\":\")(?P<token>(.*?))(\",\")/i";
        if (preg_match($regex, $response, $match)) {
            $klsueudtmo = "match";
            return $match["token"];
        } else {
            return "";
        }
    }
    public function notif_email($email, $id, $message)
    {
        $lhtszwpusl = "id";
        $this->load->model("Mtrx");
        $this->Mtrx->send_email($email, "Status Order #" . $id, $message . "\r\n\r\n" . site_url("akun/riwayat-transaksi/view/" . $id));
    }
    public function member_notif($userid, $message)
    {
        $usvuis = "cek";
        $cek = $this->db->get_where("users", array("us_id" => $userid))->row();
        send_sms($cek->us_phone, $message);
    }
    public function cust_notif($trx, $message)
    {
        $GLOBALS["hfniqwr"] = "message";
        send_sms($trx->tr_no_hp, $message);
    }
    public function resend_digi($id = 0)
    {
        $trx = $this->trx_model->adm_view(abs(intval($id)));
        $GLOBALS["vdjfdltjvm"] = "trx";
        if (!$trx) {
            show_error("Transaksi tidak ditemukan.");
        }
        $this->load->model("Api_h2h_order_model", "CurlReport");
        $this->CurlReport->sendWebhookPrabayar($trx);
        $this->session->set_flashdata("success", "Callback Berhasil Dikirim Ke Digiflazz!");
        redirect("admin/transaksi/view/" . $trx->tr_id);
    }
    public function sub($id)
    {
        $GLOBALS["kxprchbup"] = "id";
        $GLOBALS["piptjmmxnir"] = "res";
        $sub = array();
        $this->db->where("id", $id);
        $qcugjwbxvj = "opsi";
        $this->db->order_by("urut", "ASC");
        $opsi = $this->db->get("mod_menu_webview")->result();
        foreach ($opsi as $res) {
            if ($res->menu_action == "1") {
                $this->db->where("op_produk", $res->menu_target);
                $this->db->order_by("op_nama", "ASC");
                $opr = $this->db->get("operator")->result();
                foreach ($opr as $val) {
                    $GLOBALS["disfeyt"] = "sub";
                    $sub[] = array("id" => $val->op_produk . "/" . $val->op_id, "title" => $val->op_nama, "icon" => base_url($res->menu_icon), "link" => "");
                }
            } else {
                if ($res->menu_action == "2") {
                    $GLOBALS["tvgkeliptnm"] = "pisah";
                    $uxfpquva = "pisah";
                    $ldtibjmjx = "val";
                    $pisah = explode(",", $res->menu_target);
                    $GLOBALS["tldtqcwrz"] = "opr";
                    $opr = $this->db->query("SELECT * FROM `operator` WHERE op_produk = '" . $pisah[0] . "' AND op_nama RLIKE '(" . $pisah[1] . ")' ORDER BY op_nama")->result();
                    foreach ($opr as $val) {
                        $GLOBALS["qkxacaqbp"] = "sub";
                        $sub[] = array("id" => $val->op_produk . "/" . $val->op_id, "title" => $val->op_nama, "icon" => base_url($res->menu_icon), "link" => "");
                    }
                } else {
                    if ($res->menu_action == "3") {
                        $GLOBALS["ollrjjoykg"] = "pisah";
                        $GLOBALS["oemkonixy"] = "pisah";
                        $GLOBALS["dubmysgc"] = "pisah";
                        $GLOBALS["mwfyhljtgw"] = "opr";
                        $GLOBALS["oltsbwxogly"] = "val";
                        $pisah = explode(",", $res->menu_target);
                        $opr = $this->db->query("SELECT * FROM `operator` WHERE op_produk = '" . $pisah[0] . "' AND op_nama NOT RLIKE '(" . $pisah[1] . ")' ORDER BY op_nama")->result();
                        foreach ($opr as $val) {
                            $sub[] = array("id" => $val->op_produk . "/" . $val->op_id, "title" => $val->op_nama, "icon" => base_url($res->menu_icon), "link" => "");
                        }
                    }
                }
            }
        }
        return $sub;
    }
    public function sub_pro($id)
    {
        $GLOBALS["oaevbtd"] = "providers";
        $GLOBALS["qmjpnwwl"] = "id";
        $providers = array();
        $njcenxsnnrm = "opsi";
        $this->db->where("menu", $id);
        $this->db->order_by("urut", "ASC");
        $opsi = $this->db->get("mod_menu_webview")->result();
        $GLOBALS["oidfobo"] = "providers";
        foreach ($opsi as $op) {
            if ($op->menu_action == "1") {
                $providers[] = array("id" => $op->menu_target, "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "");
            } else {
                if ($op->menu_action == "2" || $op->menu_action == "4") {
                    $pvauegdrmx = "providers";
                    $providers[] = array("id" => str_replace(",", "/", $op->menu_target), "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "");
                } else {
                    if ($op->menu_action == "3") {
                        $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => $op->menu_target);
                    } else {
                        if ($op->menu_action == "5") {
                            $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "sub_category" => $this->sub($op->menu_target));
                        } else {
                            if ($op->menu_action == "6") {
                                $qicccjliorv = "providers";
                                $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "sub_category" => $this->sub_pro2($op->menu_target));
                            } else {
                                if ($op->menu_action == "7") {
                                    $GLOBALS["gctpsftrxd"] = "providers";
                                    $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "popup_menu" => $this->sub($op->menu_target));
                                } else {
                                    if ($op->menu_action == "8") {
                                        $GLOBALS["scijbnjkr"] = "providers";
                                        $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "popup_menu" => $this->sub_pro($op->menu_target));
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        return $providers;
    }
    public function sub_pro2($id)
    {
        $xrcyrdzsqc = "providers";
        $oxtdddklsoj = "id";
        $providers = array();
        $this->db->where("menu", $id);
        $this->db->order_by("urut", "ASC");
        $xnhnqvayle = "opsi";
        $GLOBALS["brndcgbuclv"] = "providers";
        $opsi = $this->db->get("mod_menu_webview")->result();
        foreach ($opsi as $op) {
            if ($op->menu_action == "1") {
                $GLOBALS["ltuhaxffj"] = "providers";
                $providers[] = array("id" => $op->menu_target, "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "");
            } else {
                if ($op->menu_action == "2" || $op->menu_action == "4") {
                    $providers[] = array("id" => str_replace(",", "/", $op->menu_target), "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "");
                } else {
                    if ($op->menu_action == "3") {
                        $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => $op->menu_target);
                    } else {
                        if ($op->menu_action == "5") {
                            $GLOBALS["rkcpwcecpxlc"] = "providers";
                            $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "sub_category" => $this->sub($op->menu_target));
                        } else {
                            if ($op->menu_action == "6") {
                                $yxqdypllzhxy = "providers";
                                $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "sub_category" => $this->sub_pro($op->menu_target));
                            } else {
                                if ($op->menu_action == "7") {
                                    $hubmygddlcn = "providers";
                                    $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "popup_menu" => $this->sub($op->menu_target));
                                } else {
                                    if ($op->menu_action == "8") {
                                        $mjkmdpie = "providers";
                                        $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "popup_menu" => $this->sub_pro($op->menu_target));
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        return $providers;
    }
    public function prov($id, $user = null)
    {
        $zhgryobvbe = "providers";
        $providers = array();
        $this->db->where("menu", $id);
        $this->db->where("menu_hide", "0");
        $this->db->order_by("urut", "ASC");
        foreach ($this->db->get("mod_menu_webview")->result() as $op) {
            $hide_by_saldo = $this->config->item("hide_menu")["hide_by_saldo"];
            $csbftvsa = "domain";
            $hide_by_username = $this->config->item("hide_menu")["hide_by_username"];
            $hide_by_ktp = $this->config->item("hide_menu")["hide_by_ktp"];
            $min_saldo = $this->config->item("hide_menu")["min_saldo"];
            $username = $this->config->item("hide_menu")["username"];
            $kiqhwg = "domain";
            $bamedctokw = "licensi";
            $jygtkxm = "domain";
            $this->load->model("Ebuds_mod_lisensi");
            $licensi = $this->Ebuds_mod_lisensi->get_lisensi("hide_menu");
            $lisensi = $this->hide_menu("decrypt", $licensi);
            $domain = base_url();
            $domain = str_replace("https://", "", $domain);
            $domain = str_replace("/", "", $domain);
            if ($lisensi === $domain) {
                $GLOBALS["nmrepxrcvd"] = "username";
                if (in_array($domain, ["blanksreload.com", "mitratopserver.com"])) {
                    $GLOBALS["yjnpqglukia"] = "userx";
                    $GLOBALS["mxefdnpqbyb"] = "userx";
                    $menux = $this->config->item("hide_menu")["special_menu"];
                    $userx = $this->config->item("hide_menu")["special_user"];
                    $GLOBALS["hrxvxx"] = "user";
                    if (!preg_match($userx, $user["us_name"]) && preg_match($menux, $op->menu_nama)) {
                        continue;
                    }
                }
                if (!preg_match("/(w38s)/i", $user["us_name"]) && $op->menu_nama == "Modul Webpul") {
                    continue;
                }
                $lqjkfkpglfv = "user";
                $ktp = json_decode($user["us_data"], true);
                $gaxdji = "min_saldo";
                if ((!isset($ktp["ktp_verified"]) || $ktp["ktp_verified"] != 1) && preg_match($hide_by_ktp, $op->menu_nama)) {
                    continue;
                }
                if (preg_match($hide_by_saldo, $op->menu_nama) && $user["us_balance"] < ${$gaxdji}) {
                    continue;
                }
                if (preg_match($hide_by_username, $op->menu_nama) && preg_match($username, ${$lqjkfkpglfv}["us_username"])) {
                    continue;
                }
            }
            if ($op->menu_action == "1") {
                $GLOBALS["mumaludspwl"] = "providers";
                $providers[] = array("id" => $op->menu_target, "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "");
            } else {
                if ($op->menu_action == "2" || $op->menu_action == "4") {
                    $providers[] = array("id" => str_replace(",", "/", $op->menu_target), "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "");
                } else {
                    if ($op->menu_action == "3") {
                        $GLOBALS["fvwyqpezv"] = "providers";
                        $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => $op->menu_target);
                    } else {
                        if ($op->menu_action == "5") {
                            $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "sub_category" => $this->sub($op->menu_target));
                        } else {
                            if ($op->menu_action == "6") {
                                $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "sub_category" => $this->sub_pro($op->menu_target));
                            } else {
                                if ($op->menu_action == "7") {
                                    $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "popup_menu" => $this->sub($op->menu_target));
                                } else {
                                    if ($op->menu_action == "8") {
                                        $providers[] = array("id" => "", "title" => $op->menu_nama, "icon" => base_url($op->menu_icon), "link" => "", "popup_menu" => $this->sub_pro($op->menu_target));
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        return $providers;
    }
    public function menu($id, $data = null, $nama = null)
    {
        $kwcmjyxyg = "nama";
        $nlzvxdmyq = "data";
        $GLOBALS["sfihsihd"] = "id";
        $uxicelb = "id";
        $opsi = $this->db->get_where("mod_menu_judul", ["menu" => $id])->row();
        return array("id" => "category", "title" => $opsi->judul, "data" => $data, "contents" => $this->prov($id, $nama));
    }
    public function tabs($id, $data = null, $nama = null)
    {
        $rfejfx = "opsi";
        $GLOBALS["ntfodwd"] = "id";
        $GLOBALS["rrkijc"] = "id";
        $tabs = array();
        $this->db->where("tabs_id", $id);
        $this->db->order_by("urut", "ASC");
        foreach ($this->db->get("mod_menu_judul")->result() as $op) {
            $GLOBALS["nuuhlhswyb"] = "tabs";
            $ysvsxsljm = "nama";
            $tabs[] = $this->menu($op->menu, $data, $nama);
        }
        ${$rfejfx} = $this->db->get_where("mod_menu_tabs", array("tabs_id" => $id))->row();
        return array("id" => strtolower($opsi->tabs_judul), "title" => $opsi->tabs_judul, "contents" => $tabs);
    }
    public function menu_tabs($data = null, $nama = null)
    {
        $wzgtmmbjml = "menus";
        $menus = array();
        $tabs = $this->db->query("SELECT * FROM mod_menu_tabs WHERE 1")->result();
        foreach ($tabs as $tab) {
            $GLOBALS["ivtuumm"] = "nama";
            $menus[] = $this->tabs($tab->tabs_id, $data, $nama);
        }
        return array("id" => "tabs", "contents" => $menus);
    }
    public function data()
    {
        return $this->db->query("SELECT * FROM `mod_menu_judul` WHERE `menu` NOT LIKE 'warna' AND `menu_hide` = '0' ORDER BY `urut` ASC")->result();
    }
    public function get_tagihan($reply_message)
    {
        $GLOBALS["xrapzahvs"] = "regex";
        $this->load->config("ppob_regex_amount");
        $regex = $this->config->item("ppob_regex_amount")[0];
        $tagihan = 0;
        if (preg_match($regex, $reply_message, $matches)) {
            $tagihan = $matches["amount"];
        }
        return $tagihan;
    }
    public function get_voucher($vo_id)
    {
        return $this->db->get_where("voucher", array("vo_id" => $vo_id))->row();
    }
    public function get_cektrx($trx)
    {
        $wkyozutqxcvo = "voc";
        $GLOBALS["eyttlxyh"] = "opsi";
        $esjosh = "opsi";
        $voc = $this->get_voucher($trx->vo_id);
        if (isset($trx->tr_id_plgn)) {
            $data = $this->db->query("SELECT * FROM `transaksi` WHERE `vo_id` = " . $voc->vo_ppob_cek . " AND tr_id_plgn = '" . $trx->tr_id_plgn . "'ORDER BY `tr_id` DESC LIMIT 1")->row();
        } else {
            $data = $this->db->query("SELECT * FROM `transaksi` WHERE `vo_id` = " . $voc->vo_ppob_cek . " AND tr_no_hp = '" . $trx->tr_no_hp . "'ORDER BY `tr_id` DESC LIMIT 1")->row();
        }
        ${$esjosh} = $data->tr_opsi ? json_decode($data->tr_opsi, true) : array();
        if ($trx->tr_harga2 > $this->get_tagihan($opsi["server_message"])) {
            return $trx->tr_harga2;
        } else {
            $ohfdaz = "opsi";
            return $this->get_tagihan($opsi["server_message"]);
        }
    }
    public function notif_deposit($admin)
    {
        $waktu = $this->db->get_where("setelan", array("set_key" => "deposit"))->row();
        $qqniwmyyksc = "exp_time";
        $jam = json_decode($waktu->set_val, true)["time"];
        $exp_time = time() - 3600 * $jam;
        $query = $this->db->query("SELECT * FROM deposit WHERE de_status = 'pending' AND de_tanggal > '{$exp_time}'");
        if ($query->num_rows() > 0) {
            foreach ($query->result() as $trx) {
                if ($trx->kirim_notif < 1) {
                    $this->db->where("de_id", $trx->de_id);
                    $this->db->set("kirim_notif", 1);
                    $this->db->update("deposit");
                    $bank = $this->data_bank($trx->de_payment);
                    $GLOBALS["bjqlcvdjdlno"] = "admin";
                    $GLOBALS["omyigupz"] = "opsi";
                    $opsi = json_decode($trx->de_opsi, TRUE);
                    $member = $this->db->get_where("users", array("us_id" => $trx->us_id))->row();
                    $GLOBALS["jvhbfkore"] = "kecuali";
                    $notif = "Pemberitahuan Tiket Deposit\r\n\r\nUsername : " . $member->us_username . "\r\nJumlah : " . format_uang($trx->de_amount) . "\r\nMetode Pembayaran : " . $bank->nama . "\r\nWaktu : " . format_tanggal($trx->de_tanggal) . "\r\n\r\nCek Deposit\r\n" . base_url("/admin/riwayat-deposit/view/") . $trx->de_id;
                    $GLOBALS["nsxrtlzyxd"] = "kecuali";
                    send_sms($admin, $notif);
                    $kecuali = array("wpqris", "qris", "indomaret", "qris_ok", "va_bnc");
                    if (!in_array($trx->de_payment, $kecuali)) {
                        if ($trx->de_payment == "okeconnect") {
                            $lcxufbrnyto = "opsi";
                            if (isset($opsi["okeconnect"])) {
                                $gjsybgedmqt = "membermsg";
                                $wxeftul = "opsi";
                                $membermsg = "Deposit #" . $trx->de_id . " melalui " . $bank->nama . ", dengan rincian :\r\n\r\nNominal : " . format_uang2($trx->de_amount) . "\r\nPembayaran : " . $bank->nama . "\r\nKode Bayar Alfamart : " . $opsi["okeconnect"]["response"]["alfamart"]["code"] . "\r\nKode Bayar Indomaret : " . $opsi["okeconnect"]["response"]["indomaret"]["code"] . "\r\n\r\nStatus *BELUM TERBAYAR*. Silahkan transfer paling lambat " . $jam . " jam kedepan setelah notifikasi ini diterima atau Deposit tidak berlaku.";
                                send_sms($member->us_phone, $membermsg);
                            }
                        } else {
                            $membermsg = "Deposit #" . $trx->de_id . " melalui " . $bank->nama . ", dengan rincian :\r\n\r\nNominal : " . format_uang2($trx->de_amount) . "(WAJIB SAMA)\r\nPembayaran : " . $bank->nama . "\r\nNo. Rek : " . $bank->data->nomor_rekening . "\r\nAtas Nama : " . $bank->data->nama_rekening . "\r\n\r\nStatus *BELUM TERBAYAR*. Silahkan transfer paling lambat " . $jam . " jam kedepan setelah notifikasi ini diterima atau Deposit tidak berlaku.";
                            $GLOBALS["vpwludn"] = "membermsg";
                            send_sms($member->us_phone, $membermsg);
                        }
                    }
                }
            }
        }
    }
    private function data_bank($key)
    {
        $yhkmypq = "payments";
        $basxalqhp = "key";
        $payments = $this->payment->get();
        return $payments[$key];
    }
    public function mod_sn($type, $reply_message)
    {
        $pgntqmjrxo = "type";
        $GLOBALS["ktpmajgobvhs"] = "type";
        if ($type == "speedpulsav1") {
            $GLOBALS["rnagyxj"] = "regexpaket";
            $hbjcynvhy = "paket";
            $GLOBALS["csbdffbs"] = "regexpaket";
            $GLOBALS["bxccvpfjg"] = "harga";
            $jnvrxdxkbbk = "regexharga";
            $GLOBALS["vxrmxvk"] = "matches";
            $drenylpeu = "regexharga";
            $paket = null;
            $gdohirqf = "paket";
            $harga = null;
            $regexpaket = "/(SUKSES)(\\,)(?P<paket>(.*?))(hr)/i";
            $regexharga = "/(Rp)( )(?P<harga>(.*?))( Saldo)/i";
            preg_match($regexpaket, $reply_message, $matches);
            if ($matches) {
                $paket = $matches["paket"];
            }
            preg_match(${$drenylpeu}, $reply_message, $matches);
            if ($matches) {
                $harga = $matches["harga"];
            }
            return ${$gdohirqf} . " Hari/" . format_uang2($harga);
        } else {
            if ($type == "speedpulsav2") {
                $wlypgowcegi = "i";
                $GLOBALS["atkewbjuify"] = "i";
                $xunspftvpm = "data";
                $hasil = explode(PHP_EOL, $reply_message);
                $xumrlorjfy = "data";
                $jml = count($hasil) - 1;
                $data = array();
                for ($i = 0; $i < $jml; ${$wlypgowcegi}++) {
                    $GLOBALS["iggysyt"] = "i";
                    if ($i == 0) {
                        continue;
                    }
                    $GLOBALS["gademtryr"] = "hasil";
                    $cari[$i] = explode("#", $hasil[$i]);
                    $data[] = $cari[$i][2] . "#" . $cari[$i][3];
                }
                return implode("/", ${$xunspftvpm});
            } else {
                return null;
            }
        }
    }
    public function send_report($trx, $message)
    {
        $ihbitaigpnub = "response";
        $mrjlpwwiqf = "refid";
        $sobihzvq = "httpcode";
        $user = $this->db->get_where("users", array("us_id" => $trx->us_id))->row();
        $curl = curl_init();
        $refid = "refid=" . $trx->tr_reffid;
        curl_setopt_array($curl, array(CURLOPT_URL => $user->us_h2h_report . "?" . $refid . "&message=" . urlencode($message), CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => "", CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 10, CURLOPT_FOLLOWLOCATION => true, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => "GET"));
        $GLOBALS["xvqbnw"] = "message";
        $response = curl_exec($curl);
        $httpcode = curl_getinfo($curl, CURLINFO_HTTP_CODE);
        $GLOBALS["iwcwrklua"] = "curl";
        curl_close($curl);
        $this->db->insert("sms_keluar", array("out_trx_id" => $trx->tr_id, "out_to" => $user->us_username, "out_message" => "STATUS : " . $httpcode . "\r\n" . $message, "out_submit_date" => time()));
    }
    public function ip_custom()
    {
        $this->db->select("transaksi.*,voucher.vo_harga_beli,voucher.vo_harga,voucher.vo_harga_reseller,voucher.vo_kode_trx,voucher.vo_kode_fisik,voucher.vo_status,server.sv_nama,server.sv_saldo,server.sv_format_trx,server.sv_regex_sukses,server.sv_regex_gagal,server.sv_regex_sn,server.sv_gateway,server.sv_sms_center,server.sv_jabber_center,server.sv_pin,server.sv_data,server.sv_custom_ip,users.us_username,users.us_name,users.us_email,users.us_phone,users.us_balance,users.us_data,users.us_telegram_id");
        $this->db->from("transaksi");
        $this->db->join("server", "server.sv_id = transaksi.sv_id", "LEFT");
        $this->db->join("voucher", "voucher.vo_id = transaksi.vo_id", "LEFT");
        $this->db->join("users", "users.us_id = transaksi.us_id", "LEFT");
        $this->db->where("server.sv_gateway", "mod_ip");
        $this->db->where("transaksi.tr_status_pembayaran", "sukses");
        $this->db->where("transaksi.tr_status", "pending");
        $this->db->order_by("transaksi.tr_id", "ASC");
        $query_results = $this->db->get()->result();
        foreach ($query_results as $trx) {
            $GLOBALS["iyttvukon"] = "opsi";
            $GLOBALS["tmntzito"] = "sv_data";
            $GLOBALS["aomhupxatl"] = "idmember";
            $isdrcyxis = "sv_data";
            $sv_data = json_decode($trx->sv_data, TRUE);
            $lysjpww = "replaces";
            $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
            $GLOBALS["rchfsdoc"] = "sv_data";
            if (strpos($sv_data["h2h"]["userid"], " ") !== false) {
                $hivalmgdhw = "sv_data";
                $whoboxqkrxc = "sv_data";
                $idmember = explode($sv_data["h2h"]["userid"])[0];
                $userid = explode($sv_data["h2h"]["userid"])[1];
            } else {
                $eyweinokly = "idmember";
                $GLOBALS["fuikowqybdh"] = "sv_data";
                $nekmpjirkgyq = "userid";
                $idmember = $sv_data["h2h"]["userid"];
                $userid = "";
            }
            ${$lysjpww} = array("{ID}" => $trx->tr_id, "{KODE}" => $trx->vo_kode, "{NO_HP}" => $trx->tr_no_hp, "{ID_PLGN}" => $trx->tr_id_plgn, "{PIN}" => ${$isdrcyxis}["h2h"]["pin"], "{NOMINAL}" => $trx->tr_harga - $trx->vo_harga, "{MEMBER_ID}" => $idmember, "{USER_ID}" => $userid, "{PASS}" => $sv_data["h2h"]["password"]);
            $pesan = str_ireplace(array_keys($replaces), array_values($replaces), json_decode($trx->sv_custom_ip, TRUE)[$trx->op_produk]);
            if (strpos(strtolower($trx->sv_nama), "nm") !== false) {
                $this->send_jabber($trx->sv_jabber_center, "HRG." . $trx->vo_kode);
                sleep(2);
                $cek = $this->cek_harga($trx);
                $vtbwguuq = "cek";
                if ($cek["status"] == "false") {
                    $dydcyfmrvz = "ggmessage";
                    $ewcvqkxn = "trx";
                    $GLOBALS["mdtcpxgbosm"] = "trx";
                    $ggmessage = "Trx #" . $trx->tr_id . " " . ($trx->vo_kode_trx ? $trx->vo_kode_trx : $trx->vo_kode) . "." . ($trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp) . " GAGAL. Ulangi beberapa saat lagi. Saldo " . format_uang2($trx->sv_saldo);
                    $this->Mtrx->set_gagal($trx, $ggmessage);
                    $this->update_harga($trx, $cek["harga"]);
                } else {
                    $GLOBALS["bwocbthtuco"] = "sv_data";
                    $gytrsb = "response";
                    $GLOBALS["svehnyk"] = "response";
                    $GLOBALS["fjdowolsrn"] = "ceksms";
                    $response = $this->curl($sv_data["h2h"]["url"] . "?" . $pesan);
                    $GLOBALS["pucolxmeihn"] = "response";
                    $cxgbrxfq = "response";
                    $GLOBALS["oqkpkdksif"] = "ceksms";
                    $ceksms = $this->db->get_where("sms_masuk", array("in_trx_id" => $trx->tr_id))->row();
                    if ($ceksms) {
                        $this->db->where("in_id", $ceksms->in_id);
                        $this->db->set("in_message", $response);
                        $this->db->set("in_from", $trx->sv_nama);
                        $this->db->set("in_timestamp", time());
                        $this->db->update("sms_masuk");
                    } else {
                        $kchxmoqky = "response";
                        $sms_masuk = array("in_trx_id" => $trx->tr_id, "in_type" => "sms", "in_from" => $trx->sv_nama, "in_message" => $response, "in_timestamp" => time());
                        $this->db->insert("sms_masuk", $sms_masuk);
                    }
                    if (strpos(strtolower($response), "gagal") !== false || strpos(strtolower(${$cxgbrxfq}), "salah kode") !== false || strpos(strtolower(${$gytrsb}), "requires product parameter") !== false || strpos(strtolower($response), "curl error") !== false) {
                        $GLOBALS["jtidattisg"] = "response";
                        $this->load->model("Mtrx");
                        $jibjkysi = "trx";
                        $this->Mtrx->set_gagal($trx, $response);
                    } else {
                        $this->db->where("tr_id", $trx->tr_id);
                        $this->db->set("tr_status", "-");
                        $this->db->update("transaksi");
                    }
                }
            }
        }
    }
    private function curl($url)
    {
        $ncrwqjnjiyn = "curl";
        $domftgjwb = "curl_errno";
        $GLOBALS["dxbdfjn"] = "url";
        $msxbiimbg = "curl";
        $curl = curl_init();
        curl_setopt_array($curl, array(CURLOPT_URL => $url, CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => "", CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 10, CURLOPT_FOLLOWLOCATION => true, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => "GET"));
        $response = curl_exec($curl);
        $curl_errno = curl_errno($curl);
        $curl_error = curl_error($curl);
        curl_close($curl);
        if ($curl_errno > 0) {
            return "CURL Error ({$curl_errno}): {$curl_error}\n";
        } else {
            $GLOBALS["yfmdfudet"] = "response";
            return $response;
        }
    }
    public function callback_apigames($trx, $message)
    {
        $GLOBALS["xxjofvpwx"] = "user";
        $GLOBALS["aobktmmlunrb"] = "message";
        $lsggfihthp = "curl";
        $user = $this->db->get_where("users", array("us_id" => $trx->us_id))->row();
        $GLOBALS["aoqkprbcjd"] = "httpcode";
        $puiknwfpee = "response";
        $GLOBALS["fcjnjqudlqv"] = "curl";
        $GLOBALS["xhilwdrlxok"] = "refid";
        $curl = curl_init();
        $dlksymmxha = "refid";
        $GLOBALS["iouauqjobco"] = "message";
        $refid = "refid=" . $trx->tr_id;
        $GLOBALS["glmbvyh"] = "curl";
        curl_setopt_array($curl, array(CURLOPT_URL => "https://ebudspay.com/api/custom_report/type/otomax?" . $refid . "&message=" . urlencode($message), CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => "", CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 10, CURLOPT_FOLLOWLOCATION => true, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => "GET"));
        $response = curl_exec($curl);
        $httpcode = curl_getinfo($curl, CURLINFO_HTTP_CODE);
        curl_close($curl);
        $this->db->insert("sms_keluar", array("out_trx_id" => $trx->tr_id, "out_to" => $user->us_username, "out_message" => "STATUS : " . $httpcode . " https://ebudspay.com/api/custom_report/type/otomax?" . $refid . "&message=" . urlencode($message), "out_submit_date" => time()));
    }
    public function apigames()
    {
        $this->load->model("Mtrx");
        $this->db->select("transaksi.*,voucher.*,server.*,users.*");
        $this->db->from("transaksi");
        $this->db->join("server", "server.sv_id = transaksi.sv_id", "LEFT");
        $this->db->join("voucher", "voucher.vo_id = transaksi.vo_id", "LEFT");
        $this->db->join("users", "users.us_id = transaksi.us_id", "LEFT");
        $GLOBALS["reiweqciv"] = "query_results";
        $bxoepoc = "query_results";
        $this->db->where("server.sv_gateway", "apigames");
        $this->db->where("transaksi.tr_status_pembayaran", "sukses");
        $this->db->where("transaksi.tr_status", "pending");
        $this->db->where("transaksi.tr_retry", "0");
        $this->db->order_by("transaksi.tr_id", "ASC");
        $query_results = $this->db->get()->result();
        foreach ($query_results as $trx) {
            $opqscgiii = "sv_data";
            $sv_data = json_decode($trx->sv_data, TRUE);
            $llzsvpyp = "replaces";
            $cklbsijc = "api";
            $GLOBALS["cwnwohh"] = "sv_data";
            $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
            $GLOBALS["stsqgbxgguf"] = "response";
            $jxtjyihelq = "response";
            $GLOBALS["sckunfin"] = "pesan";
            $GLOBALS["ntlvpedqgro"] = "api";
            $replaces = array("{ID}" => $trx->tr_id, "{KODE}" => $trx->vo_kode, "{NO_HP}" => $trx->tr_no_hp, "{ID_PLGN}" => $trx->tr_id_plgn, "{MEMBER_ID}" => $sv_data["apigames"]["userid"], "{PASS}" => $sv_data["apigames"]["password"], "{SIGN}" => md5($sv_data["apigames"]["userid"] . $sv_data["apigames"]["password"]));
            $smvingsm = "ceksms";
            $pesan = str_ireplace(array_keys($replaces), array_values($replaces), json_decode($trx->sv_custom_ip, TRUE)[$trx->op_produk]);
            $response = $this->curl($sv_data["apigames"]["url"] . "?" . $pesan);
            $api = json_decode($response, true);
            if (isset($api["data"]["message"])) {
                $GLOBALS["xsukzwv"] = "inmessage";
                $inmessage = $api["data"]["message"];
            } else {
                $GLOBALS["wyanippfiq"] = "inmessage";
                $inmessage = $response;
            }
            ${$smvingsm} = $this->db->get_where("sms_masuk", array("in_trx_id" => $trx->tr_id))->row();
            if ($ceksms) {
                $this->db->where("in_id", $ceksms->in_id);
                $this->db->set("in_message", $inmessage);
                $this->db->set("in_from", $trx->sv_nama);
                $this->db->set("in_timestamp", time());
                $this->db->update("sms_masuk");
            } else {
                $sms_masuk = array("in_trx_id" => $trx->tr_id, "in_type" => "sms", "in_from" => $trx->sv_nama, "in_message" => $inmessage, "in_timestamp" => time());
                $this->db->insert("sms_masuk", $sms_masuk);
            }
            $this->db->where("tr_id", $trx->tr_id);
            $this->db->set("tr_status", "-");
            $this->db->set("tr_retry", "1");
            $this->db->update("transaksi");
        }
    }
    public function apigames_cek()
    {
        $this->load->model("Mtrx");
        $this->db->select("transaksi.*,voucher.*,server.*,users.*");
        $this->db->from("transaksi");
        $this->db->join("server", "server.sv_id = transaksi.sv_id", "LEFT");
        $this->db->join("voucher", "voucher.vo_id = transaksi.vo_id", "LEFT");
        $this->db->join("users", "users.us_id = transaksi.us_id", "LEFT");
        $this->db->where("server.sv_gateway", "apigames");
        $this->db->where("transaksi.tr_status_pembayaran", "sukses");
        $this->db->where("transaksi.tr_status", "-");
        $this->db->where("TIMESTAMPDIFF(SECOND, FROM_UNIXTIME(transaksi.tr_tanggal), NOW()) >", 2);
        $this->db->order_by("transaksi.tr_id", "ASC");
        $GLOBALS["dlbqragbf"] = "query_results";
        $query_results = $this->db->get()->result();
        foreach ($query_results as $trx) {
            $ntsmuwwrt = "sv_data";
            $zfnfcykxmsy = "tujuan";
            $sv_data = json_decode($trx->sv_data, TRUE);
            $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
            $tujuan = $trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp;
            $ceksms = $this->db->get_where("sms_masuk", array("in_trx_id" => $trx->tr_id))->row();
            if ($ceksms) {
                $GLOBALS["pcucqzxukl"] = "status";
                if (strpos(strtolower($ceksms->in_message), "transaksi pending") !== false) {
                    $mlzkbzou = "sv_data";
                    $GLOBALS["sxbqobimfuoy"] = "response";
                    $lmicetyh = "api";
                    $response = $this->curl("https://v1.apigames.id/merchant/" . $sv_data["apigames"]["userid"] . "/cektrx/" . $trx->tr_id);
                    $api = json_decode($response, true);
                    $reply_message = $api["data"]["message"];
                } else {
                    $reply_message = $ceksms->in_message;
                }
                $guvifmpkor = "reply_message";
                $status = $this->Mtrx->cek_status($reply_message, $trx->sv_regex_sukses, $trx->sv_regex_gagal);
                if ($status == "sukses") {
                    $ruvhygdqi = "reply_message";
                    $patebwjefv = "trx";
                    $this->Mtrx->set_sukses($trx, $reply_message);
                }
                if ($status == "gagal") {
                    $xpfffla = "reply_message";
                    $this->Mtrx->set_gagal($trx, $reply_message);
                }
            }
        }
    }
    public function rorizma_cek()
    {
        $GLOBALS["zzfbmti"] = "query_results";
        $this->load->model("Mtrx");
        $this->db->select("transaksi.*,voucher.*,server.*,users.*");
        $this->db->from("transaksi");
        $this->db->join("server", "server.sv_id = transaksi.sv_id", "LEFT");
        $GLOBALS["fobcdggz"] = "query_results";
        $this->db->join("voucher", "voucher.vo_id = transaksi.vo_id", "LEFT");
        $this->db->join("users", "users.us_id = transaksi.us_id", "LEFT");
        $this->db->where("server.sv_gateway", "rorizma");
        $this->db->where("transaksi.tr_status_pembayaran", "sukses");
        $this->db->where("transaksi.tr_status", "-");
        $this->db->where("TIMESTAMPDIFF(SECOND, FROM_UNIXTIME(transaksi.tr_tanggal), NOW()) >", 5);
        $this->db->order_by("transaksi.tr_id", "ASC");
        $query_results = $this->db->get()->result();
        foreach ($query_results as $trx) {
            $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
            $GLOBALS["qgddggxa"] = "opsi";
            if (isset($opsi["InvoiceId"])) {
                $GLOBALS["rbcupryzqfz"] = "curl";
                $GLOBALS["voghiw"] = "ceksms";
                $GLOBALS["ppujotsqwwme"] = "message";
                $curl = curl_init();
                curl_setopt_array($curl, array(CURLOPT_URL => "https://rorizma.id/api/cekhdi", CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => "", CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 0, CURLOPT_FOLLOWLOCATION => true, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => "POST", CURLOPT_POSTFIELDS => "InvoiceId=" . $opsi["InvoiceId"], CURLOPT_HTTPHEADER => array("Content-Type: application/x-www-form-urlencoded", "Cookie: ci_session=b6b0d13073bc36badc0201246a0455c19c8323ae")));
                $vvdgtcx = "message";
                $response = curl_exec($curl);
                $GLOBALS["ksdwhjsfc"] = "response";
                $mmcmnadqhia = "ceksms";
                curl_close($curl);
                $message = json_decode($response, true);
                $reply_message = "Kosong";
                if ($message["data"]["StatusOrder"] == 4) {
                    $GLOBALS["zkcgcwb"] = "message";
                    $ucrwvn = "reply_message";
                    $reply_message = "Trx #" . $trx->tr_id . " " . ($trx->vo_kode_trx ? $trx->vo_kode_trx : $trx->vo_kode) . "." . ($trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp) . " GAGAL. " . $message["data"]["Ket"] . ". Harga " . format_uang($message["data"]["Amount"]) . ". Saldo " . format_uang2($trx->sv_saldo);
                    $this->Mtrx->set_gagal($trx, $reply_message);
                }
                if (${$vvdgtcx}["data"]["StatusOrder"] == 5) {
                    $ngunvsemgy = "reply_message";
                    $GLOBALS["nkvaft"] = "message";
                    $GLOBALS["tehnkpc"] = "message";
                    $reply_message = "Trx #" . $trx->tr_id . " " . ($trx->vo_kode_trx ? $trx->vo_kode_trx : $trx->vo_kode) . "." . ($trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp) . " SUKSES. SN/Ref: " . $message["data"]["InvoiceId"] . ". Harga " . format_uang($message["data"]["Amount"]) . ". Saldo " . format_uang2($trx->sv_saldo);
                    $this->Mtrx->set_sukses($trx, $reply_message);
                }
                $ceksms = $this->db->get_where("sms_masuk", array("in_trx_id" => $trx->tr_id))->row();
                if (${$mmcmnadqhia}) {
                    $this->db->where("in_id", $ceksms->in_id);
                    $this->db->set("in_message", $reply_message);
                    $this->db->set("in_from", $trx->sv_nama);
                    $this->db->set("in_timestamp", time());
                    $this->db->update("sms_masuk");
                } else {
                    $sms_masuk = array("in_trx_id" => $trx->tr_id, "in_type" => "sms", "in_from" => $trx->sv_nama, "in_message" => $reply_message, "in_timestamp" => time());
                    $this->db->insert("sms_masuk", $sms_masuk);
                }
            }
        }
    }
    public function warunk_cek()
    {
        $GLOBALS["sygfpqqlle"] = "apikey";
        $GLOBALS["hwdicqkit"] = "query_results";
        $apiurlcek = $this->config->item("apiurlcek_warunk");
        $apikey = $this->config->item("apikey_warunk");
        $this->load->model("Mtrx");
        $this->db->select("transaksi.*,voucher.*,server.*,users.*");
        $this->db->from("transaksi");
        $this->db->join("server", "server.sv_id = transaksi.sv_id", "LEFT");
        $this->db->join("voucher", "voucher.vo_id = transaksi.vo_id", "LEFT");
        $this->db->join("users", "users.us_id = transaksi.us_id", "LEFT");
        $this->db->where("server.sv_gateway", "wgid");
        $this->db->where("transaksi.tr_status_pembayaran", "sukses");
        $this->db->where("transaksi.tr_status", "-");
        $this->db->where("TIMESTAMPDIFF(SECOND, FROM_UNIXTIME(transaksi.tr_tanggal), NOW()) >", 5);
        $this->db->order_by("transaksi.tr_id", "ASC");
        $query_results = $this->db->get()->result();
        foreach ($query_results as $trx) {
            $vjrreouupurp = "opsi";
            $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
            if (isset($opsi["InvoiceId"])) {
                $GLOBALS["rfttlztlj"] = "curl";
                $GLOBALS["yiwydwa"] = "ceksms";
                $GLOBALS["pfbfjm"] = "apiurlcek";
                $GLOBALS["dmywgkeipnnv"] = "opsi";
                $curl = curl_init();
                curl_setopt_array($curl, array(CURLOPT_URL => $apiurlcek, CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => "", CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 0, CURLOPT_FOLLOWLOCATION => true, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => "POST", CURLOPT_POSTFIELDS => "api_key=" . $apikey . "&action=status&order_id=" . $opsi["InvoiceId"], CURLOPT_HTTPHEADER => array("Content-Type: application/x-www-form-urlencoded", "Cookie: PHPSESSID=t84k2in6t4plcrkalu6otlkkoa")));
                $response = curl_exec($curl);
                curl_close($curl);
                $message = json_decode($response, true);
                $fwjesjxje = "message";
                $GLOBALS["caolvxakhg"] = "message";
                $reply_message = "Kosong";
                if ($message["data"]["status"] == "cancel") {
                    $gsuoboqr = "message";
                    $sqtjubmknfz = "reply_message";
                    $qgecrvijckmd = "message";
                    $GLOBALS["ojsbfhy"] = "message";
                    $reply_message = "Trx #" . $trx->tr_id . " " . ($trx->vo_kode_trx ? $trx->vo_kode_trx : $trx->vo_kode) . "." . ($trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp) . " GAGAL. " . $message["data"]["keterangan"] . ". Harga " . format_uang($message["data"]["harga"]) . ". Saldo " . format_uang($message["data"]["saldo_sekarang"]);
                    $this->Mtrx->set_gagal($trx, $reply_message);
                }
                if (${$fwjesjxje}["data"]["status"] == "success") {
                    $bqgunayesfh = "message";
                    $GLOBALS["hahhneu"] = "trx";
                    $esbvffbv = "message";
                    $reply_message = "Trx #" . $trx->tr_id . " " . ($trx->vo_kode_trx ? $trx->vo_kode_trx : $trx->vo_kode) . "." . ($trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp) . " SUKSES. SN/Ref: " . $message["data"]["keterangan"] . ". Harga " . format_uang($message["data"]["harga"]) . ". Saldo " . format_uang($message["data"]["saldo_sekarang"]);
                    $this->Mtrx->set_sukses($trx, $reply_message);
                }
                $ceksms = $this->db->get_where("sms_masuk", array("in_trx_id" => $trx->tr_id))->row();
                if ($ceksms) {
                    $GLOBALS["ympijtcjjf"] = "reply_message";
                    $this->db->where("in_id", $ceksms->in_id);
                    $this->db->set("in_message", $reply_message);
                    $this->db->set("in_from", $trx->sv_nama);
                    $this->db->set("in_timestamp", time());
                    $this->db->update("sms_masuk");
                } else {
                    $mcqcmajwme = "sms_masuk";
                    $GLOBALS["cijvxmsuc"] = "sms_masuk";
                    $sms_masuk = array("in_trx_id" => $trx->tr_id, "in_type" => "sms", "in_from" => $trx->sv_nama, "in_message" => $reply_message, "in_timestamp" => time());
                    $this->db->insert("sms_masuk", $sms_masuk);
                }
            }
        }
    }
    public function digi_cek()
    {
        $this->load->model("Mtrx");
        $GLOBALS["mcpwdbkthf"] = "query_results";
        $this->db->select("transaksi.*,voucher.vo_harga_beli,voucher.vo_harga,voucher.vo_harga_reseller,voucher.vo_kode_trx,voucher.vo_kode_fisik,voucher.vo_status,server.sv_nama,server.sv_saldo,server.sv_format_trx,server.sv_regex_sukses,server.sv_regex_gagal,server.sv_regex_sn,server.sv_gateway,server.sv_sms_center,server.sv_jabber_center,server.sv_pin,server.sv_data,server.sv_custom_ip,users.us_username,users.us_name,users.us_email,users.us_phone,users.us_balance,users.us_data,users.us_telegram_id");
        $this->db->from("transaksi");
        $this->db->join("server", "server.sv_id = transaksi.sv_id", "LEFT");
        $this->db->join("voucher", "voucher.vo_id = transaksi.vo_id", "LEFT");
        $this->db->join("users", "users.us_id = transaksi.us_id", "LEFT");
        $this->db->where("server.sv_gateway", "mod_ip");
        $this->db->where("transaksi.tr_status_pembayaran", "sukses");
        $this->db->where("transaksi.tr_status", "-");
        $this->db->where("TIMESTAMPDIFF(SECOND, FROM_UNIXTIME(transaksi.tr_tanggal), NOW()) >", 2);
        $this->db->order_by("transaksi.tr_id", "ASC");
        $query_results = $this->db->get()->result();
        foreach ($query_results as $trx) {
            $sv_data = json_decode($trx->sv_data, TRUE);
            $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
            $tujuan = $trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp;
            $ceksms = $this->db->get_where("sms_masuk", array("in_trx_id" => $trx->tr_id))->row();
            if ($ceksms) {
                $dgmimtwwiqr = "status";
                $reply_message = $ceksms->in_message;
                $GLOBALS["ywqknww"] = "reply_message";
                $status = $this->Mtrx->cek_status($reply_message, $trx->sv_regex_sukses, $trx->sv_regex_gagal);
                if ($status == "sukses") {
                    $GLOBALS["dbucirpty"] = "trx";
                    $this->Mtrx->set_sukses($trx, $reply_message);
                }
                $eobgylfiwumo = "status";
                if ($status == "gagal") {
                    $GLOBALS["lugnjrvfcl"] = "trx";
                    $this->Mtrx->set_gagal($trx, $reply_message);
                }
            }
        }
    }
    public function cek_koneksi($engine)
    {
        $lfxmodxrtolm = "servers";
        $ftwfwb = "server";
        $servers = $this->db->get_where("server", array("sv_gateway" => "apigames"))->result();
        foreach ($servers as $server) {
            $yjczoioa = "engine";
            $ixsvyicng = "sv_data";
            $GLOBALS["myqkmtomn"] = "result";
            $GLOBALS["hsdsgv"] = "response";
            $GLOBALS["vowotszuqyv"] = "sv_data";
            $ocschn = "engine";
            $sv_data = $server->sv_data ? json_decode($server->sv_data, true) : array();
            $response = $this->curl("https://v1.apigames.id/merchant/" . $sv_data["apigames"]["userid"] . "/cek-koneksi?engine=" . $engine . "&signature=" . md5($sv_data["apigames"]["userid"] . $sv_data["apigames"]["password"]));
            $result = json_decode($response, true);
            if ($engine == "higgs") {
                $jgyyiif = "result";
                if ($result["status"] == "1") {
                    $satuojegx = "engine";
                    return array("status" => "Koneksi " . $engine . " Aman", "message" => $result["message"] . " Data : " . json_encode($result["data"]["data"]));
                } else {
                    $tmbfhoeolq = "engine";
                    return array("status" => "Koneksi " . $engine . " Gagal", "message" => $result["error_msg"]);
                }
            }
            if ($engine == "kiosgamer") {
                $GLOBALS["dptvstbljc"] = "result";
                if ($result["status"] == "1") {
                    return array("status" => "Koneksi " . $engine . " Aman", "message" => "Terkoneksi dengan akun " . $result["data"]["data"]["username"] . " Shell Balance : " . format_uang($result["data"]["data"]["shell_balance"]));
                } else {
                    $emdkucxt = "result";
                    return array("status" => "Koneksi " . $engine . " Gagal", "message" => $result["error_msg"]);
                }
            }
            if ($engine == "smileone") {
                if ($result["status"] == "1") {
                    $GLOBALS["isymsfqk"] = "result";
                    $GLOBALS["vgldvhj"] = "engine";
                    return array("status" => "Koneksi " . $engine . " Aman", "message" => "Terkoneksi dengan akun " . $result["data"]["data"]["customer_name"]);
                } else {
                    $rfdgiboi = "result";
                    return array("status" => "Koneksi " . $engine . " Gagal", "message" => $result["error_msg"]);
                }
            }
            if (${$ocschn} == "unipin") {
                if ($result["status"] == "1") {
                    $trveuplimq = "result";
                    $bgyeigsdghv = "engine";
                    return array("status" => "Koneksi " . $engine . " Aman", "message" => "Terkoneksi dengan akun " . $result["data"]["name"]);
                } else {
                    $vlvlwclhc = "result";
                    $GLOBALS["qgpyoz"] = "engine";
                    return array("status" => "Koneksi " . $engine . " Gagal", "message" => $result["error_msg"]);
                }
            }
        }
    }
    private function send_jabber($receiver, $message)
    {
        $GLOBALS["bgctmkwvlu"] = "jabber_api";
        $this->load->model("sms_model");
        $wkxedwnqcr = "jabber_api";
        $jabber_api = json_decode($this->system->get_set("jabber_api"), true);
        if ($jabber_api["server_url"] && $jabber_api["username"] && $jabber_api["password"]) {
            $liezyvabevs = "message";
            if ($this->sms_model->send_mass_jabber(array($receiver), $message, $jabber_api)) {
                return true;
            } else {
                return false;
            }
        } else {
            $GLOBALS["mfgofpd"] = "message";
            $this->sms_model->send_mass_jabber(array($receiver), $message, $jabber_api);
            return true;
        }
    }
    public function cek_harga($trx)
    {
        $GLOBALS["mhmsvordsvfm"] = "result";
        $result = 0;
        $this->db->where("in_trx_id", "0");
        $this->db->where("in_type", "jabber");
        $this->db->where("in_from", $trx->sv_jabber_center);
        $this->db->where("in_timestamp >=", strtotime(date("Y/m/d 00:00:00")));
        $this->db->where("in_timestamp <=", strtotime(date("Y/m/d 23:59:59")));
        $this->db->like("in_message", $trx->vo_kode . " = Rp.", "both");
        $this->db->order_by("in_message", "DESC");
        $this->db->limit(1);
        $results = $this->db->get("sms_masuk")->row();
        $regex = "/(" . $trx->vo_kode . " = Rp.)(?P<amount>[0-9\\.\\,]+)/is";
        if (preg_match($regex, $results->in_message, $matches)) {
            $GLOBALS["dcrpvfix"] = "result";
            $result = preg_replace("~\\D~", "", $matches["amount"]);
        }
        if ($result >= $trx->tr_harga2) {
            return array("status" => "false", "harga" => $result);
        } else {
            return array("status" => "true", "harga" => $result);
        }
    }
    private function update_harga($trx, $harga)
    {
        $GLOBALS["plwgefqst"] = "harga1";
        $iedurwhxhni = "markup1";
        $markup1 = $trx->vo_harga - $trx->vo_harga_beli;
        $markup2 = $trx->vo_harga_reseller - $trx->vo_harga_beli;
        $GLOBALS["arippw"] = "markup2";
        $harga1 = $harga + $markup1;
        $harga2 = $harga + $markup2;
        $this->db->where("vo_id", $trx->vo_id);
        $this->db->set("vo_harga_beli", $harga);
        $this->db->set("vo_harga", $harga1);
        $this->db->set("vo_harga_reseller", $harga2);
        $this->db->update("voucher");
    }
    public function get_location($user)
    {
        $GLOBALS["irhreqsj"] = "domain";
        $GLOBALS["bwyutqm"] = "domain";
        $GLOBALS["pgzozrp"] = "domain";
        $this->load->model("Ebuds_mod_lisensi");
        $licensi = $this->Ebuds_mod_lisensi->get_lisensi("ip_detection");
        $GLOBALS["mwvrgltp"] = "domain";
        $gevylzrh = "licensi";
        $hntwdumg = "lisensi";
        $lisensi = $this->lisensi("ip_detection", "decrypt", $licensi);
        $domain = base_url();
        $domain = str_replace("https://", "", $domain);
        $mubvetaiy = "domain";
        $domain = str_replace("/", "", $domain);
        $zxdxmkfbbd = "lisensi";
        if ($lisensi != $domain) {
            $this->db->insert("notifikasi", array("us_id" => "0", "nf_admin" => "1", "nf_judul" => "Modul IP Detection", "nf_teks" => "Lisensi tidak ditemukan", "nf_link" => "", "nf_tanggal" => time()));
        } else {
            $GLOBALS["xfvkmlss"] = "message";
            $vshcgdm = "ip";
            $ip = $this->input->ip_address();
            $this->load->library("user_agent");
            if ($this->agent->is_browser()) {
                $agent = $this->agent->browser() . " " . $this->agent->version();
            } elseif ($this->agent->is_robot()) {
                $GLOBALS["tsrfekemmcw"] = "agent";
                $agent = $this->agent->robot();
            } elseif ($this->agent->is_mobile()) {
                $GLOBALS["gstjhld"] = "agent";
                $agent = $this->agent->mobile();
            } else {
                $agent = "Unidentified User Agent";
            }
            $details = json_decode(file_get_contents("http://ip-api.io/json/" . ${$vshcgdm}));
            $tgqrjqfre = "message";
            $message = "Akun anda terdeteksi baru saja login menggunakan \r\n\r\nPerangkat : " . $this->agent->platform() . "/" . $agent . "\r\nIP Address : " . $ip . "\r\nKoneksi : " . $details->organisation . "(" . $details->city . "," . $details->region_name . "," . $details->country_name . ")\r\n\r\nJika merasa ini bukan Anda, Segera ganti Password sekarang juga melalui link berikut:\r\n" . base_url("akun/pengaturan/keamanan");
            $this->load->library("email");
            $this->email->from($this->system->get_set("site_email"), $this->system->set["site_name"]);
            $this->email->to($user->us_email);
            $this->email->subject("Pemberitahuan Login");
            $this->email->message($message);
            @$this->email->send();
            send_sms($user->us_phone, $message);
        }
    }
    public function ip_detection($user, $name)
    {
        $wgbeoecop = "domain";
        $GLOBALS["tirxygnlzc"] = "domain";
        $this->load->model("Ebuds_mod_lisensi");
        $GLOBALS["pskjihbrgmwi"] = "licensi";
        $opqnvswpoqv = "lisensi";
        $licensi = $this->Ebuds_mod_lisensi->get_lisensi("ip_detection");
        $lisensi = $this->lisensi("ip_detection", "decrypt", $licensi);
        $domain = base_url();
        $domain = str_replace("https://", "", $domain);
        $domain = str_replace("/", "", $domain);
        if ($lisensi != $domain) {
            $this->db->insert("notifikasi", array("us_id" => "0", "nf_admin" => "1", "nf_judul" => "Modul IP Detection", "nf_teks" => "Lisensi tidak ditemukan", "nf_link" => "", "nf_tanggal" => time()));
        } else {
            $GLOBALS["xjwuzld"] = "us_data";
            $ip = $this->input->ip_address();
            $hnfhqoigyt = "ip";
            $us_data = $user["us_data"] ? json_decode($user["us_data"], true) : array();
            if (isset($us_data["ip_address"])) {
                $GLOBALS["dtqrgsrwbwu"] = "us_data";
                $us_ip = $us_data["ip_address"];
            } else {
                $GLOBALS["lvldjlxc"] = "us_ip";
                $us_ip = null;
            }
            if (strpos($us_ip, ${$hnfhqoigyt}) === false) {
                $GLOBALS["grwrcpocaryn"] = "message";
                $GLOBALS["kssqlkjp"] = "ip";
                $tbvybjkgcwbf = "details";
                $lottdtrfl = "message";
                $details = json_decode(file_get_contents("http://ip-api.io/json/" . $ip));
                $message = "Akun " . $name . " Anda terdeteksi baru saja masuk di Aplikasi, \r\n\r\nIP Address : " . $ip . "\r\nKoneksi : " . $details->organisation . "(" . $details->city . "," . $details->region_name . "," . $details->country_name . ")\r\n\r\nJika merasa ini bukan Anda, Segera ganti Password sekarang juga melalui link berikut:\r\n" . base_url("akun/pengaturan/keamanan");
                $GLOBALS["jpnibrf"] = "user";
                $this->load->library("email");
                $this->email->from($this->system->get_set("site_email"), $this->system->set["site_name"]);
                $this->email->to($user["us_email"]);
                $this->email->subject("Pemberitahuan Login");
                $this->email->message($message);
                @$this->email->send();
                send_sms($user["us_phone"], $message);
                $ughqmvimouq = "ip";
                $new_ip = $us_ip . "|" . $ip;
                $us_data["ip_address"] = $new_ip;
                $this->db->where("us_id", $this->user->us_id);
                $this->db->set("us_data", json_encode($us_data));
                $this->db->update("users");
            }
        }
    }
    public function maintenance($time, $message)
    {
        $GLOBALS["nrnriusbr"] = "menit";
        $GLOBALS["ulwqkr"] = "menit";
        $obiitgwnteg = "jam";
        $wptljoojua = "menit";
        $this->load->library("form_validation");
        $jam = date("H", $time);
        $menit = date("i", $time);
        if ($jam >= 23 && $menit >= 30 || $jam == 00 && $menit <= 30) {
            $GLOBALS["sbpdzgrr"] = "message";
            $this->form_validation->set_message("vcr", $message);
            return false;
        }
    }
    public function send_notif_apk($reg_id, $judul, $isi)
    {
        $zbuzofjf = "config";
        $config = json_decode($this->system->get_set("aplikasi_android"));
        $ch = curl_init();
        $GLOBALS["gilppesee"] = "ch";
        $kfjfush = "judul";
        $royamcd = "ch";
        $GLOBALS["lhthpvfcgbrc"] = "reg_id";
        $fomlzwyqi = "ch";
        curl_setopt($ch, CURLOPT_URL, "https://fcm.googleapis.com/fcm/send");
        $fzzwjqti = "ch";
        curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: key=" . $config->fcm_server_key, "Content-Type: application/json"));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        $GLOBALS["sgpgqsgzul"] = "ch";
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($ch, CURLOPT_POST, true);
        $GLOBALS["tretwrq"] = "req";
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode(array("to" => $reg_id, "notification" => array("title" => $judul, "body" => $isi, "sound" => "mySound"))));
        $req = curl_exec($ch);
        curl_close($ch);
        return $req;
    }
    public function push_deposit_notif($data)
    {
        $GLOBALS["envqvfhdfe"] = "data";
        $tcwmxvozuf = "user_data";
        $GLOBALS["amvfnooh"] = "user_data";
        $user = $this->db->get_where("users", ["us_id" => $data[0]])->row();
        $vnzhojbwng = "judul";
        $user_data = json_decode($user->us_data, true);
        $reg_id = $user_data["api"]["reg_id"];
        $xwuwrdkbxqks = "isi";
        $judul = "Deposit Berhasil";
        $isi = "Saldo sebesar " . format_uang($data[2]) . " telah ditambahkan ke akun anda";
        $this->send_notif_apk($reg_id, $judul, $isi);
    }
    public function push_deposit_notif2($to, $nominal)
    {
        $tqwfqpamlo = "user_data";
        $GLOBALS["leymjyt"] = "to";
        $user = $this->db->get_where("users", ["us_phone" => $to])->row();
        $GLOBALS["kbdnze"] = "isi";
        $GLOBALS["oqccdwm"] = "user_data";
        $user_data = json_decode($user->us_data, true);
        $wbvikxbtidlm = "judul";
        $xjgvbzqr = "reg_id";
        $reg_id = $user_data["api"]["reg_id"];
        $judul = "Deposit Berhasil";
        $isi = "Saldo sebesar " . format_uang2($nominal) . " telah ditambahkan ke akun anda";
        $this->send_notif_apk($reg_id, $judul, $isi);
    }
    function ConvertCRC16($str)
    {
        $nqinrqqluwim = "c";
        $eqlutqyrlvr = "hex";
        $GLOBALS["evhtmkqerdty"] = "crc";
        $GLOBALS["vbbrep"] = "hex";
        $GLOBALS["jhrgzmduu"] = "c";
        $GLOBALS["cmawanphge"] = "crc";
        function charCodeAt($str, $i)
        {
            return ord(substr($str, $i, 1));
        }
        $crc = 0xffff;
        $GLOBALS["vcavbwjux"] = "hex";
        $strlen = strlen($str);
        for ($c = 0; $c < $strlen; $c++) {
            $GLOBALS["vbcwpumr"] = "c";
            $mueoxiyjtis = "i";
            $crc ^= charCodeAt($str, $c) << 8;
            for ($i = 0; $i < 8; ${$mueoxiyjtis}++) {
                if ($crc & 0x8000) {
                    $crc = $crc << 1 ^ 0x1021;
                } else {
                    $GLOBALS["jmfilkalomx"] = "crc";
                    $GLOBALS["jexszot"] = "crc";
                    $crc <<= 1;
                }
            }
        }
        ${$eqlutqyrlvr} = $crc & 0xffff;
        $hex = strtoupper(dechex($hex));
        if (strlen($hex) == 3) {
            $hex = "0" . $hex;
        }
        return $hex;
    }
    public function generate_qris($data, $nominal)
    {
        $cxryczljclb = "nominal";
        $GLOBALS["hogqbxyaa"] = "qris";
        $GLOBALS["chvinf"] = "step1";
        $GLOBALS["yyhadqdvkflp"] = "fix";
        $GLOBALS["nzbbdu"] = "qris";
        $GLOBALS["zgqqqmur"] = "uang";
        $hmuyhmyub = "data";
        $pdevgw = "uang";
        $mkuiffl = "qris";
        $oqvxfhsmpiz = "step1";
        $qris = $data;
        $qty = $nominal;
        $qris = substr($qris, 0, -4);
        $step1 = str_replace("010211", "010212", $qris);
        $step2 = explode("5802ID", $step1);
        $uang = "54" . sprintf("%02d", strlen($qty)) . $qty;
        $uang .= "5802ID";
        $fix = trim($step2[0]) . $uang . trim($step2[1]);
        $fix .= $this->ConvertCRC16($fix);
        return $fix;
    }
    public function send_mail($data, $nomor)
    {
        $GLOBALS["efxynjx"] = "data";
        $user = $this->db->get_where("users", ["us_phone" => $nomor])->row();
        $pesan = $this->load->view("email", $data, true);
        $this->load->library("email");
        $GLOBALS["wsrudwg"] = "config";
        $config = array("charset" => "utf-8", "wordwrap" => TRUE, "mailtype" => "html");
        $this->email->initialize($config);
        $this->email->from($this->system->get_set("site_email"), $this->system->set["site_name"]);
        $this->email->to($user->us_email);
        $this->email->subject($data["judul"]);
        $this->email->message($pesan);
        @$this->email->send();
    }
    public function send_mail_trx($trx, $sn = 'N/A', $status)
    {
        $ljkqukdw = "data";
        $ehcmdqs = "data";
        $lkfgfqjfq = "data";
        $ucrkehdqduf = "config";
        $GLOBALS["hwmxcivbe"] = "user";
        $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
        $user = $this->db->get_where("users", ["us_id" => $trx->us_id])->row();
        $data = array();
        $imxaygmep = "data";
        $chrlqqyxuy = "data";
        $xivlxnsbuif = "pesan";
        $data["idtrx"] = $trx->tr_id;
        $qnyfcmjmb = "data";
        $data["tanggal"] = format_tanggal($trx->tr_tanggal);
        $data["produk"] = $trx->vo_nominal;
        $data["label"] = isset($trx->tr_id_plgn) ? $this->system->produk->{$trx->op_produk}->form->id_plgn->label : "No. HP";
        $data["tujuan"] = $trx->tr_id_plgn ? $trx->tr_id_plgn : $trx->tr_no_hp;
        $data["status"] = $status;
        $data["sn"] = $sn;
        $data["harga"] = format_uang2($trx->tr_harga);
        $pesan = $this->load->view("email_transaksi", $data, true);
        $this->load->library("email");
        $config = array("charset" => "utf-8", "wordwrap" => TRUE, "mailtype" => "html");
        $this->email->initialize($config);
        $this->email->from($this->system->get_set("site_email"), $this->system->set["site_name"]);
        $this->email->to($user->us_email);
        $this->email->subject("Detail Transaksi #" . $trx->tr_id);
        $this->email->message($pesan);
        @$this->email->send();
    }
    public function fix_double_refund($us_id)
    {
        $GLOBALS["ejmxvvefhps"] = "total";
        $GLOBALS["dwthdag"] = "data";
        $data = $this->db->query("SELECT * FROM balance_history WHERE info NOT REGEXP '^Koreksi' AND info REGEXP 'Refund Pembayaran' AND info IN ( SELECT info FROM balance_history GROUP BY info, kredit HAVING COUNT(*) > 1 ) AND id NOT IN ( SELECT MIN(id) FROM balance_history GROUP BY info, kredit HAVING COUNT(*) > 1 ) AND us_id={$us_id}")->result_array();
        $total = 0;
        $GLOBALS["pesgwb"] = "info";
        $info = null;
        if ($data) {
            $icsaetu = "i";
            for ($i = 0; $i < count($data); $i++) {
                $GLOBALS["xdfvijqqlgpm"] = "data";
                $ndpgvfb = "data";
                $GLOBALS["qffbwkge"] = "i";
                $GLOBALS["sfmbfogmxpl"] = "i";
                $GLOBALS["pkiqxlagqv"] = "data";
                $GLOBALS["gjsuwjsg"] = "info";
                $info = "Koreksi " . $data[$i]["info"] . " (" . count($data) . " Data Double)";
                $total += $data[$i]["kredit"];
                $this->db->where("id", $data[$i]["id"]);
                $this->db->set("info", $data[$i]["info"] . " #" . ($i + 1));
                $this->db->update("balance_history");
            }
            $this->db->select("us_balance");
            $GLOBALS["eejbvqw"] = "us_id";
            $GLOBALS["zwgwksdbunb"] = "info";
            $this->db->where("us_id", $us_id);
            $saldo = $this->db->get("users")->row()->us_balance;
            $this->db->where("us_id", $us_id);
            $uighsv = "saldo";
            $GLOBALS["bpwmsqk"] = "total";
            $this->db->set("us_balance", "us_balance - " . $total, false);
            $this->db->update("users");
            insert_balance_history(array($us_id, $total, "0", $saldo - $total, $info, time()));
            return "OK";
        } else {
            return "NO DATA DOUBLE FOUND";
        }
    }
    public function fix_double_deposit($us_id)
    {
        $bgtfphuk = "data";
        $GLOBALS["jonywkxfqs"] = "data";
        $data = $this->db->query("SELECT * FROM balance_history WHERE info NOT REGEXP '^Koreksi' AND info REGEXP 'Deposit melalui' AND info IN ( SELECT info FROM balance_history GROUP BY info, kredit HAVING COUNT(*) > 1 ) AND id NOT IN ( SELECT MIN(id) FROM balance_history GROUP BY info, kredit HAVING COUNT(*) > 1 ) AND us_id={$us_id}")->result_array();
        $total = 0;
        $info = null;
        if ($data) {
            $ufvckw = "i";
            $GLOBALS["xuwogdpn"] = "total";
            $GLOBALS["pkhusegkbsc"] = "i";
            for ($i = 0; ${$ufvckw} < count($data); $i++) {
                $xghhwxseisco = "i";
                $GLOBALS["pwkdrgsdoy"] = "i";
                $GLOBALS["eusoynn"] = "i";
                $zuntba = "data";
                $oajazbbhlhqp = "info";
                $ucfbxex = "i";
                $info = "Koreksi " . $data[$i]["info"] . " (" . count($data) . " Data Double)";
                $GLOBALS["ngwnlueoecci"] = "data";
                $total += $data[$i]["kredit"];
                $this->db->where("id", $data[$i]["id"]);
                $this->db->set("info", $data[$i]["info"] . " #" . ($i + 1));
                $this->db->update("balance_history");
            }
            $this->db->select("us_balance");
            $this->db->where("us_id", $us_id);
            $saldo = $this->db->get("users")->row()->us_balance;
            $this->db->where("us_id", $us_id);
            $gsebqget = "us_id";
            $this->db->set("us_balance", "us_balance - " . $total, false);
            $GLOBALS["ozbirwm"] = "saldo";
            $this->db->update("users");
            insert_balance_history(array($us_id, $total, "0", $saldo - $total, $info, time()));
            return "OK";
        } else {
            return "AMAN";
        }
    }
    public function fix_double($us_id, $idteleadmin)
    {
        $GLOBALS["hhsazcy"] = "us_id";
        $GLOBALS["hageucxvg"] = "us_id";
        $bcrrfn = "user";
        $this->db->select("us_username");
        $GLOBALS["umwcnzqvcqti"] = "us_id";
        $this->db->where("us_id", $us_id);
        $user = $this->db->get("users")->row()->us_username;
        if ($this->fix_double_refund($us_id) == "OK") {
            $this->send_telegram_message($idteleadmin, "Ada Double Refund Berhasil di Koreksi, Cek Disini " . base_url("admin/riwayat-saldo/index/") . $user);
            return array("Data" => "Double Refund Terdeteksi, Sudah Berhasil di Koreksi");
        }
        if ($this->fix_double_deposit($us_id) == "OK") {
            $GLOBALS["osuiupyz"] = "idteleadmin";
            $this->send_telegram_message($idteleadmin, "Ada Double Deposit Berhasil di Koreksi, Cek Disini " . base_url("admin/riwayat-saldo/index/") . $user);
            return array("Data" => "Double Deposit Terdeteksi, Sudah Berhasil di Koreksi");
        }
    }
    public function send_telegram_message($telegram_id, $message)
    {
        $GLOBALS["xgfhljv"] = "ch";
        $GLOBALS["fhjhvjeceiv"] = "ch";
        $GLOBALS["ekrbimmdslx"] = "telegram_id";
        $edkcctkuw = "ch";
        $txwijd = "ch";
        $GLOBALS["hmhobe"] = "ch";
        $this->telebot_config = json_decode($this->system->get_set("telegram_bot"));
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, "https://api.telegram.org/bot" . $this->telebot_config->token . "/sendMessage");
        $diddwix = "req";
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        $mvghfyxu = "ch";
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/x-www-form-urlencoded"));
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query(array("chat_id" => $telegram_id, "text" => $message, "disable_web_page_preview" => true)));
        $req = curl_exec($ch);
        curl_close($ch);
        return $req;
    }
    public function fix_double_trx($us_id)
    {
        $GLOBALS["wzypjbjjm"] = "lisensi";
        $this->load->model("Ebuds_mod_lisensi");
        $mumxqvkhg = "licensi";
        $GLOBALS["ciuvbvr"] = "licensi";
        $GLOBALS["nzfbtbhm"] = "lisensi";
        $GLOBALS["qznfjeesb"] = "domain";
        $licensi = $this->Ebuds_mod_lisensi->get_lisensi("fix_double_trx");
        $lisensi = $this->lisensi("fix_double_trx", "decrypt", $licensi);
        $domain = $_SERVER["SERVER_NAME"];
        $domain = str_replace("http://", "", $domain);
        $GLOBALS["otswfgq"] = "domain";
        $domain = str_replace("https://", "", $domain);
        $domain = str_replace("www.", "", $domain);
        if ($lisensi == $domain) {
            $GLOBALS["zvmelxys"] = "saldoaman";
            $ehlrlludj = "harga";
            $mkonfudcor = "result";
            $result = $this->db->query("SELECT * FROM `transaksi` WHERE `us_id`= {$us_id} AND `tr_double_status`= 'yes'")->result();
            $harga = 0;
            $regex = null;
            $GLOBALS["oxbjggdy"] = "saldoaman";
            $saldo = $this->db->get_where("users", ["us_id" => $us_id])->row()->us_balance;
            foreach ($result as $trx) {
                $GLOBALS["ioxeljl"] = "harga";
                $harga += $trx->tr_harga2;
                if (count($result) > 1) {
                    $GLOBALS["fjynqdaqatp"] = "regex";
                    $regex = "Trx #" . $trx->tr_id . "|";
                }
                if (count($result) == 1) {
                    $GLOBALS["fogsytj"] = "regex";
                    $regex = "Trx #" . $trx->tr_id;
                }
                $GLOBALS["lweznsyudt"] = "opsi";
                $opsi = $trx->tr_opsi ? json_decode($trx->tr_opsi, true) : array();
                $opsi["gg"] = "Transaksi ditolak";
                $this->db->where("tr_id", $trx->tr_id);
                $this->db->set("tr_status_pembayaran", "refund");
                $this->db->set("tr_status", "gagal");
                $this->db->set("tr_double_status", "no");
                $this->db->set("tr_valid_status", "ok");
                $this->db->set("tr_tanggal_sukses", time());
                $sdtyatjrp = "note";
                $this->db->set("tr_opsi", json_encode($opsi));
                $this->db->update("transaksi");
                $note = "Refund Pembayaran / Trx #" . $trx->tr_id;
                $this->db->where("us_id", $trx->us_id);
                $this->db->where("info", $note);
                if (!$this->db->count_all_results("balance_history")) {
                    $GLOBALS["vggyagjeqn"] = "note";
                    insert_balance_history(array($trx->us_id, "0", $trx->tr_harga2, $saldo + $trx->tr_harga2, $note, time()));
                }
            }
            $fffrufz = "saldoakhirmutasi";
            $GLOBALS["wkwmuakyutl"] = "saldo";
            $saldoaman = false;
            $saldoakhirmutasi = $this->db->query("SELECT * FROM `balance_history` WHERE info REGEXP '{$regex}' ORDER BY id DESC LIMIT 1")->row()->saldo_akhir;
            if ($saldoakhirmutasi == $saldo) {
                $saldoaman = true;
            }
            if (!$saldoaman) {
                $this->db->query("UPDATE users SET us_balance = us_balance + {$harga} WHERE us_id = {$us_id}");
            }
            $this->db->where("us_id", $us_id);
            $this->db->set("us_double_cek", "no");
            $this->db->update("users");
        } else {
            $GLOBALS["bdbhulhlqqhy"] = "sms_masuk";
            $sms_masuk = array("in_trx_id" => "", "in_type" => "sms", "in_from" => "Auto Fix Double Trx", "in_message" => "Lisensi Salah / Tidak ditemukan", "in_timestamp" => time());
            $this->db->insert("sms_masuk", $sms_masuk);
        }
    }
    public function sukses_deposit($id, $amount)
    {
        $GLOBALS["drmwuefjlpx"] = "depo";
        $depo = $this->db->query("SELECT * FROM `deposit` WHERE `us_id` = {$id} AND `de_amount` = {$amount} ORDER BY `de_id` DESC LIMIT 1")->row();
        if ($depo) {
            $this->db->where("de_id", $depo->de_id);
            $this->db->set("de_tanggal_sukses", time());
            $this->db->update("deposit");
        }
    }
    public function user_ip()
    {
        $us_id = $this->user->us_id;
        $xqsvqtgblfh = "ip";
        $ip = $this->input->ip_address();
        $cek = $this->db->query("SELECT * FROM user_ip WHERE us_id = {$us_id} AND ip = '" . $ip . "'")->result();
        if (!$cek) {
            $GLOBALS["qajxiwc"] = "ip";
            $data = array("us_id" => $us_id, "ip" => $ip);
            $this->db->insert("user_ip", $data);
        }
    }
    private function getQueues($tabel)
    {
        $this->db->where("status", "pending");
        return $this->db->get($tabel)->result();
    }
    public function cek_kode($id)
    {
        $seqsrwlld = "trx";
        $njxclweguoo = "id";
        $trx = $this->db->get_where("transaksi", ["tr_id" => $id])->row();
        $kode = explode("+", $trx->vo_kode);
        return count($kode);
    }
    public function cek_trx($tabel, $id)
    {
        $GLOBALS["augvotp"] = "tabel";
        $GLOBALS["jnhejkx"] = "trx";
        $GLOBALS["hvyvupchdv"] = "id";
        $trx = $this->db->get_where($tabel, ["tr_id" => $id])->result();
        return count($trx);
    }
    function curlGet($url)
    {
        $GLOBALS["yveeexyk"] = "ch";
        $GLOBALS["vcanyjunqc"] = "ch";
        $GLOBALS["hgdefmehpkn"] = "response";
        $wivpezrtoou = "ch";
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        $qeyknrwzywn = "ch";
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
        $response = curl_exec($ch);
        if (curl_errno($ch)) {
            echo "Error: " . curl_error($ch);
        }
        curl_close($ch);
        return json_decode($response, true);
    }
    public function get_kode($kode)
    {
        $ojxthnir = "code";
        $rxahodgh = "data";
        $GLOBALS["ibbxghmhhid"] = "kode";
        $rfnralfct = "kode";
        $code = null;
        $GLOBALS["jognhuof"] = "cek";
        $cek = $this->db->get_where("setelan", ["set_key" => "kiosgamer"])->row();
        $GLOBALS["qeulkfdd"] = "kode";
        $GLOBALS["alievpgnbik"] = "kode";
        $GLOBALS["hryfexpa"] = "kode";
        $GLOBALS["jorvdujpqv"] = "kode";
        $ssgvckcstpmn = "code";
        $data = $cek->set_val ? json_decode($cek->set_val, TRUE) : array();
        if ($kode == "ff5") {
            $code = "local_ff_kg_5_d";
        }
        if ($kode == "ff50") {
            $bgjxmfijd = "code";
            $code = "local_ff_kg_50_d";
        }
        if ($kode == "ff70") {
            $code = "local_ff_kg_70_d";
        }
        if ($kode == "ff140") {
            $fmrndg = "code";
            $code = "local_ff_kg_140_d";
        }
        if ($kode == "ff355") {
            $tkqdqfqet = "code";
            $code = "local_ff_kg_355_d";
        }
        if ($kode == "ff720") {
            $tboxjvi = "code";
            $code = "local_ff_kg_720_d";
        }
        if ($kode == "ff7290") {
            $code = "local_ff_kg_7290_d";
        }
        $GLOBALS["aydqsujpyy"] = "kode";
        if (${$rfnralfct} == "ff36500") {
            $code = "local_ff_kg_36500_d";
        }
        if ($kode == "ff73100") {
            $code = "local_ff_kg_73100_d";
        }
        if ($kode == "ffmm") {
            $code = "local_ff_kg_member_mingguan";
        }
        if ($kode == "ffmb") {
            $code = "local_ff_kg_member_bulanan";
        }
        if ($kode == "fflu") {
            $bjytvgdswc = "code";
            $code = "local_ff_kg_level_up_pass";
        }
        return ${$ssgvckcstpmn};
    }
    public function kiosgamer_trx()
    {
        $qfoyetnjcl = "cek";
        $btihlnmgbjdp = "queues";
        $cek = $this->db->get_where("setelan", ["set_key" => "kiosgamer"])->row();
        $data = $cek->set_val ? json_decode($cek->set_val, TRUE) : array();
        $url = $data["subdomain"];
        $this->load->model("gateway/Kiosgamer_model", "kiosgamer");
        $queues = $this->getQueues("kiosgamer_trx");
        if ($queues) {
            $jjghthjzvpcq = "queue";
            foreach ($queues as $queue) {
                $GLOBALS["mzoccxuirn"] = "kode";
                $GLOBALS["qsiguhbjxuwv"] = "data";
                $GLOBALS["vuisbkism"] = "url";
                $ubwmvyqmeuia = "data";
                $kode = $this->cek_kode($queue->tr_id);
                $data = $this->cek_trx("kiosgamer_trx", $queue->tr_id);
                if ($data > $kode) {
                    continue;
                }
                $lctmbupy = "user_A";
                if ($queue->inject_status == "1") {
                    continue;
                }
                $sku = $this->get_kode($queue->kode);
                $jymbagimef = "sku";
                ${$lctmbupy} = $queue->tujuan;
                $GLOBALS["fprfkupjqsx"] = "user_A";
                $response = $this->curlGet($url . "/api_beli_freefire.php?sku=" . ${$jymbagimef} . "&user_A=" . $user_A);
                if ($response["status"]) {
                    $lilqdxcdmjt = "response";
                    $GLOBALS["vsifihwdsw"] = "ket";
                    if ($response["status"] == "ok") {
                        $GLOBALS["etfryufmqsf"] = "response";
                        $ket = $response["invoice"];
                    } else {
                        $iwlckmmkxy = "response";
                        $GLOBALS["qdqfvbqdeb"] = "ket";
                        $ket = $response["respon"];
                    }
                    $this->db->where("id", $queue->id);
                    $this->db->set("status", $response["status"]);
                    $this->db->set("ket", $ket);
                    $this->db->set("tanggal", time());
                    $this->db->set("inject_status", "1");
                    $this->db->update("kiosgamer_trx");
                }
            }
        }
    }
    public function smile_trx()
    {
        $this->load->model("gateway/Smile_one_model", "smile");
        $queues = $this->getQueues("smile_one_trx");
        if ($queues) {
            $GLOBALS["binvisj"] = "queue";
            $tpfnemcy = "queues";
            foreach ($queues as $queue) {
                $qwepedks = "data";
                $gkdlgiwyny = "kode";
                $GLOBALS["xcuueqggkf"] = "data";
                $GLOBALS["bywxukeluzm"] = "response";
                $kode = $this->cek_kode($queue->tr_id);
                $data = $this->cek_trx("smile_one_trx", $queue->tr_id);
                $yczlbbuey = "response";
                if ($data > $kode) {
                    continue;
                }
                if ($queue->inject_status == "1") {
                    continue;
                }
                $response = $this->smile->tembak($queue->tujuan, $queue->kode);
                if (${$yczlbbuey}["status"]) {
                    $GLOBALS["ksxklzmijn"] = "response";
                    $mglfju = "ket";
                    if ($response["status"] == "ok") {
                        $sknumvhwr = "ket";
                        $kvgndjfzog = "response";
                        $ket = $response["sn"] . "+" . $queue->tanggal;
                    } else {
                        $GLOBALS["xxuvypj"] = "response";
                        $GLOBALS["mboyoldq"] = "ket";
                        $ket = $response["note"];
                    }
                    $this->db->where("id", $queue->id);
                    $this->db->set("status", $response["status"]);
                    $this->db->set("ket", ${$mglfju});
                    $this->db->set("tanggal", time());
                    $this->db->set("inject_status", "1");
                    $this->db->update("smile_one_trx");
                }
            }
        }
    }
}
