class Controller { protected $data; protected $model; protected $configs; protected $params; protected $router; protected $perfil; protected $lang; protected $meta; protected $template; protected $object; protected $id_lang; protected $money; protected $iso_lang; protected $lang_company; public function getData() { return $this->data; } public function __construct($data = array()) { $this->configs = new Configurations(); $this->router = new Router(URI); $route = $this->router->getRoute(); $this->lang_company = Config::get("\x6c\x61\156\x67\x5f\x63\x6f\x6d\160\x61\x6e\x79"); $this->id_lang = isset($_SESSION["\154\x61\x6e\x67\x5f\x69\144\x5f\163\145\154"]) ? $_SESSION["\x6c\x61\x6e\147\x5f\x69\144\137\163\145\x6c"] : Config::get("\x69\144\137\154\x61\156\147"); if (isset($_SESSION["\154\141\156\x67\137\x73\145\x6c"])) { $this->iso_lang = $_SESSION["\x6c\141\x6e\147\x5f\163\145\154"]; } else { $this->iso_lang = Config::get("\151\163\x6f\x5f\154\141\156\147"); } if ($route == "\x61\144\155\x69\x6e") { } else { $this->meta = new Meta($this->id_lang); } $this->template = new Template(); $this->data = $data; $this->perfil = isset($_SESSION["\160\x65\162\146\x69\154"]) ? $_SESSION["\x70\x65\x72\146\x69\x6c"] : NULL; $money_default = $this->configs->getKey("\115\x4f\x4e\105\104\x41\137\104\105\106\101\125\x4c\x54"); $money = $this->configs->getByID($money_default[0]["\x76\141\x6c\x75\x65"], $this->id_lang); $this->money = $money; } public function Aside() { $html = "\74\154\151\x20\x20\143\154\141\x73\163\x3d\x22\x6e\141\166\55\151\x74\x65\x6d\x20\x68\x61\163\55\164\162\x65\x65\166\151\x65\x77\42\x3e\xa\40\x20\x20\x20\40\x20\40\x20\40\x20\40\x20\x3c\x61\x20\150\162\145\146\x3d\x22\x23\42\x20\143\x6c\141\163\163\75\x22\156\141\x76\55\x6c\x69\156\x6b\x22\x3e\12\x20\40\40\x20\x20\40\x20\x20\40\x20\x20\x20\40\40\x3c\151\40\143\154\x61\163\163\75\42\x6e\141\x76\55\x69\x63\x6f\x6e\40\146\141\x73\x20\x66\141\x2d\x63\x6f\x67\163\42\x3e\74\x2f\151\76\xa\x20\x20\40\x20\x20\x20\x20\x20\40\40\40\40\40\x20\x3c\160\x3e\xa\40\x20\x20\x20\x20\x20\40\x20\40\x20\40\x20\40\x20\40\x20\173\x63\157\156\x66\151\147\x75\x72\x61\x74\x69\x6f\x6e\x73\x7d\x20\x4d\120\x57\12\40\x20\x20\x20\40\x20\x20\40\x20\40\x20\x20\40\40\x20\40\x3c\x69\40\143\x6c\141\x73\x73\x3d\42\146\x61\163\x20\x66\141\x2d\x61\156\147\x6c\x65\55\154\x65\146\x74\40\162\151\x67\150\x74\42\x3e\x3c\x2f\x69\x3e\12\x20\x20\40\40\40\40\x20\40\40\x20\x20\x20\x20\x20\x3c\x2f\x70\x3e\12\x20\x20\40\x20\x20\40\x20\40\x20\40\40\x20\x3c\x2f\x61\76\xa\40\x20\40\40\x20\40\40\40\x20\x20\40\40\x3c\165\x6c\40\x69\x64\x3d\x22\167\145\142\155\141\x73\x74\145\162\x22\x20\143\154\141\x73\x73\75\42\156\141\x76\x20\x6e\141\166\x2d\x74\x72\x65\x65\166\151\145\167\42\x3e\xa\x9\x9\11\x9\x3c\x6c\151\x20\143\x6c\141\163\163\x3d\42\156\x61\x76\55\x69\x74\145\155\42\x3e\12\x20\x20\x20\x20\40\40\x20\40\x20\40\x20\x20\40\x20\40\40\74\141\40\150\x72\x65\x66\x3d\42\x7b\x72\157\x6f\x74\137\141\x64\x6d\x69\x6e\175\141\144\155\151\156\143\x6f\x6d\x70\x61\156\171\57\42\40\x63\x6c\x61\163\163\x3d\x22\x6e\141\x76\55\154\151\x6e\x6b\42\76\xa\x20\x20\x20\40\40\x20\x20\40\40\x20\40\40\x20\40\40\x20\40\x20\74\151\40\x63\x6c\x61\163\163\75\42\146\141\x73\40\146\141\55\142\x72\x69\x65\146\143\x61\163\x65\x20\156\x61\166\55\151\143\x6f\156\42\76\x3c\x2f\151\x3e\xa\40\40\x20\40\40\x20\40\x20\40\40\x20\x20\40\40\x20\40\x20\40\x3c\x70\x3e\x7b\143\x6f\x6d\160\141\x6e\x79\x7d\74\x2f\160\76\12\x20\x20\40\40\40\x20\40\40\40\40\x20\x20\40\40\40\x20\x3c\x2f\141\76\xa\x20\40\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\40\x3c\x2f\154\151\76\xa\x9\11\11\11\74\x6c\151\40\x63\x6c\141\x73\x73\75\42\x6e\141\x76\55\151\164\x65\155\x22\76\12\40\x20\40\40\x20\x20\40\x20\40\x20\x20\40\x20\x20\x20\40\x3c\141\40\x68\x72\145\146\75\42\173\162\157\157\x74\137\x61\x64\x6d\x69\156\175\x61\x64\x6d\151\156\x63\x6f\x6e\x74\x61\143\x74\x2f\42\x20\143\x6c\141\x73\163\x3d\x22\x6e\141\x76\x2d\154\x69\x6e\x6b\x22\x3e\xa\40\40\40\x20\40\40\x20\x20\40\40\x20\40\40\x20\40\x20\40\40\74\151\40\143\154\x61\163\x73\x3d\42\146\141\163\x20\x66\x61\55\x62\x72\x69\145\146\x63\141\163\x65\40\x6e\x61\x76\x2d\x69\x63\157\x6e\x22\x3e\x3c\x2f\151\x3e\12\40\40\x20\x20\40\x20\x20\40\x20\40\40\x20\40\40\40\x20\x20\x20\x3c\160\76\173\143\157\x6e\164\141\x63\164\175\74\57\x70\x3e\xa\x20\40\40\x20\x20\40\40\x20\x20\x20\40\x20\x20\x20\40\40\x3c\x2f\141\76\xa\40\x20\40\x20\40\x20\40\40\40\x20\x20\x20\40\40\74\x2f\154\151\x3e\12\x9\11\11\40\40\x3c\154\x69\40\143\x6c\141\163\163\x3d\x22\156\x61\x76\55\151\164\145\x6d\42\76\12\40\40\40\x20\x20\40\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\74\141\40\150\x72\x65\146\x3d\x22\173\162\x6f\157\x74\x5f\x61\144\x6d\151\x6e\175\x61\144\x6d\x69\156\165\163\x65\162\163\x2f\42\x20\143\x6c\x61\163\163\75\42\156\141\166\x2d\154\151\x6e\x6b\x22\x3e\xa\x20\x20\x20\x20\x20\40\x20\40\40\x20\40\40\40\40\40\x20\40\40\x3c\x69\x20\x63\x6c\x61\163\163\x3d\x22\146\141\x73\x20\x66\x61\55\x75\163\x65\162\x73\x20\x6e\141\166\55\151\143\x6f\156\x22\x3e\74\57\x69\76\12\40\x20\x20\x20\x20\40\x20\x20\40\x20\x20\40\40\40\x20\x20\40\40\74\x70\76\x7b\145\x6d\160\154\x6f\x79\145\163\175\x3c\57\160\x3e\xa\x20\40\40\x20\x20\x20\x20\40\x20\40\x20\x20\x20\40\40\40\74\x2f\x61\76\xa\40\x20\40\x20\x20\x20\40\x20\40\x20\x20\40\x20\40\74\57\x6c\151\76\xa\x9\11\x9\40\x20\74\154\151\x20\x63\x6c\x61\x73\x73\75\42\x6e\x61\166\55\x69\x74\x65\x6d\42\76\xa\40\x20\40\x20\40\x20\40\40\40\x20\40\40\40\40\40\x20\x3c\141\40\x68\x72\x65\x66\75\x22\x7b\x72\157\157\x74\x5f\141\x64\155\x69\156\x7d\141\144\155\x69\x6e\150\x6f\x6f\x6b\163\x2f\x22\x20\x63\x6c\x61\x73\x73\75\42\156\x61\166\x2d\x6c\x69\156\x6b\x22\76\12\40\40\40\x20\40\x20\40\40\40\40\x20\40\40\x20\x20\x20\40\40\x3c\151\x20\x63\x6c\141\163\x73\x3d\42\x66\x61\x73\x20\146\x61\x2d\141\156\143\x68\x6f\162\40\x6e\x61\x76\x2d\x69\143\157\156\42\76\74\x2f\x69\x3e\12\40\40\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\40\x20\x20\x3c\160\x3e\173\150\157\157\x6b\163\x7d\74\57\x70\x3e\xa\40\40\x20\40\x20\x20\40\40\40\40\x20\40\x20\x20\x20\40\x3c\x2f\x61\76\12\40\40\x20\40\x20\40\x20\40\x20\x20\40\40\40\x20\74\x2f\x6c\x69\76\12\x20\x20\40\x20\40\x20\40\40\x20\x20\x20\40\x20\40\74\154\151\40\143\x6c\141\x73\163\x3d\42\x6e\141\x76\55\x69\164\145\x6d\42\76\12\40\40\40\40\40\40\40\x20\x20\40\x20\x20\x20\40\40\x20\74\x61\40\150\162\x65\x66\x3d\42\173\x72\x6f\x6f\164\x5f\141\144\x6d\x69\x6e\x7d\x61\144\x6d\151\156\154\x61\x6e\x67\165\x61\x67\x65\163\57\42\x20\143\x6c\141\x73\x73\75\42\156\141\x76\55\154\151\156\x6b\x22\x3e\12\x20\40\40\x20\x20\40\x20\x20\40\40\x20\x20\x20\40\x20\40\x20\40\x3c\151\x20\143\x6c\141\x73\163\x3d\42\146\x61\x73\x20\x66\x61\55\x6c\x61\156\147\165\x61\147\145\40\x6e\141\x76\x2d\x69\x63\157\156\42\x3e\x3c\x2f\x69\76\xa\40\x20\x20\x20\x20\40\40\40\40\x20\x20\40\40\40\40\40\x20\x20\x3c\160\x3e\173\154\141\x6e\x67\165\141\147\145\163\175\74\57\x70\76\12\x20\x20\x20\40\x20\x20\40\40\x20\40\x20\x20\x20\x20\x20\x20\74\57\x61\x3e\12\40\40\40\x20\x20\40\40\40\x20\40\x20\x20\x20\40\74\x2f\154\x69\76\xa\40\x20\40\x20\40\x20\40\x20\x20\x20\40\40\40\x20\x20\x20\74\154\151\x20\143\x6c\x61\163\163\x3d\42\x6e\x61\x76\55\x69\164\x65\155\42\x3e\12\40\40\40\x20\40\40\x20\40\x20\x20\x20\x20\40\x20\40\x20\74\141\40\150\x72\x65\x66\75\x22\x7b\x72\x6f\157\164\x5f\141\x64\155\x69\156\x7d\x61\x64\x6d\x69\156\103\x75\162\162\x65\156\x63\151\145\163\57\42\40\143\154\141\x73\163\x3d\42\156\141\166\55\x6c\x69\x6e\153\42\x3e\xa\40\x20\x20\40\40\40\40\x20\40\40\40\40\40\40\x20\40\40\40\x3c\x69\40\143\x6c\141\163\163\x3d\x22\146\x61\163\40\x66\x61\55\x6d\x6f\156\x65\171\55\142\x69\154\154\40\x6e\141\x76\55\151\143\157\156\x22\76\x3c\x2f\151\x3e\xa\x20\40\40\40\x20\40\x20\40\40\x20\40\x20\40\40\x20\40\x20\40\74\160\x3e\115\157\x6e\x65\144\141\x73\74\57\160\76\12\x20\x20\x20\x20\40\x20\x20\40\40\40\40\40\40\x20\x20\40\x3c\57\x61\76\xa\x20\x20\40\x20\x20\40\x20\40\40\40\40\x20\40\40\x3c\x2f\154\x69\76\xa\x20\40\40\x20\x20\x20\x20\x20\40\x20\40\40\40\x20\x3c\x6c\151\40\143\154\141\x73\x73\x3d\42\156\141\x76\x2d\x69\164\x65\155\x22\x3e\xa\x20\40\x20\x20\x20\x20\40\40\40\x20\40\40\40\40\40\x20\x3c\141\40\x68\x72\145\x66\75\42\x7b\162\157\157\164\137\x61\144\x6d\x69\x6e\x7d\x41\144\155\151\x6e\124\x68\x65\155\145\163\57\42\x20\x63\154\x61\163\x73\75\42\x6e\141\x76\55\x6c\x69\156\x6b\42\76\12\x20\40\40\x20\40\40\40\x20\40\40\x20\40\x20\x20\x20\40\x20\40\74\x69\x20\143\154\141\163\163\x3d\x22\x66\x61\142\x20\x66\141\x2d\150\164\155\154\x35\40\x6e\x61\166\x2d\151\143\157\x6e\42\x3e\74\x2f\151\76\xa\x20\40\x20\40\40\40\40\40\x20\40\40\40\x20\40\x20\40\40\x20\x3c\160\76\x7b\x74\x68\x65\155\145\163\175\74\x2f\160\x3e\xa\40\x20\x20\40\x20\x20\x20\40\40\40\40\x20\x20\40\x20\40\74\57\141\76\12\40\x20\x20\x20\40\40\x20\x20\40\x20\40\x20\x20\x20\x3c\x2f\x6c\x69\76\12\x20\x20\40\40\40\x20\40\40\x20\40\x20\x20\40\x20\x3c\x6c\x69\40\x63\x6c\x61\x73\x73\75\x22\156\141\166\x2d\151\x74\145\155\42\76\12\x20\40\x20\x20\x20\40\x20\40\40\x20\x20\40\40\x20\x20\40\x3c\x61\x20\150\x72\x65\x66\x3d\x22\173\x72\157\157\x74\x5f\x61\x64\x6d\151\156\x7d\x61\x64\x6d\151\x6e\x70\x61\147\x65\x73\x2f\x22\40\x63\154\x61\163\163\x3d\x22\156\141\166\55\154\151\156\x6b\x22\76\xa\x20\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x20\40\x3c\151\40\143\154\x61\x73\x73\75\42\146\141\163\40\146\x61\55\146\x69\154\145\40\x6e\x61\166\55\151\143\157\x6e\42\x3e\x3c\57\151\76\xa\x20\40\40\x20\40\40\x20\40\40\x20\x20\x20\x20\x20\40\x20\40\x20\74\x70\76\173\160\x61\x67\x65\137\x63\157\x72\x65\175\x3c\x2f\x70\76\12\40\x20\x20\x20\40\40\40\x20\x20\40\40\x20\x20\40\40\x20\74\x2f\141\x3e\12\x20\x20\x20\40\40\40\x20\x20\40\40\40\x20\x20\40\74\57\154\151\x3e\12\40\40\40\x20\x20\40\x20\x20\40\x20\40\x20\x20\x20\x3c\x6c\x69\x20\x63\154\141\163\x73\x3d\42\156\x61\x76\55\x69\164\x65\155\x22\76\xa\40\x20\x20\x20\40\40\40\40\40\40\x20\x20\40\x20\40\40\74\141\x20\x68\162\145\x66\75\x22\x7b\x72\157\157\164\137\141\144\x6d\x69\156\175\141\x64\x6d\x69\x6e\163\145\143\143\x69\157\156\x65\163\57\x22\40\x63\154\x61\x73\x73\x3d\x22\x6e\x61\x76\x2d\154\x69\156\x6b\x22\76\12\x20\x20\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\40\40\x20\40\x20\x3c\x69\40\x63\x6c\141\163\163\x3d\x22\146\x61\x73\x20\146\x61\55\146\157\154\x64\145\x72\40\156\x61\x76\x2d\151\x63\x6f\156\42\x3e\74\x2f\151\76\xa\x20\40\40\x20\40\40\x20\40\40\40\40\x20\x20\x20\40\x20\40\40\x3c\160\76\173\143\x6d\163\175\74\x2f\x70\76\xa\40\40\40\x20\x20\x20\x20\x20\40\x20\40\40\x20\40\x20\40\x3c\57\x61\76\12\40\x20\x20\40\40\x20\x20\40\x20\40\x20\40\40\40\x3c\x2f\154\151\x3e\xa\x20\x20\x20\40\x20\40\x20\x20\40\x20\40\x20\40\40\74\x6c\x69\x20\143\154\x61\163\x73\75\x22\x6e\141\x76\x2d\x69\x74\x65\155\x22\76\12\40\x20\40\x20\40\x20\x20\x20\40\x20\x20\40\x20\40\40\x20\74\141\x20\150\x72\145\x66\x3d\42\173\x72\x6f\x6f\164\x5f\141\144\x6d\x69\156\x7d\141\144\155\x69\156\x6d\x6f\x64\x75\154\x65\163\x2f\42\x20\143\154\x61\x73\x73\75\x22\x6e\x61\166\x2d\x6c\151\x6e\x6b\x22\76\12\40\40\40\x20\40\40\40\40\x20\x20\x20\40\x20\x20\40\40\x20\x20\x3c\x69\x20\x63\x6c\x61\x73\163\x3d\42\146\141\x73\x20\146\x61\55\x63\165\x62\x65\163\x20\156\141\x76\x2d\x69\143\x6f\156\42\x3e\74\x2f\x69\x3e\xa\40\x20\40\x20\40\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x3c\160\76\x7b\155\157\144\165\x6c\x65\163\x7d\x3c\x2f\x70\76\xa\x20\40\40\x20\40\40\40\x20\x20\x20\40\40\x20\x20\x20\40\x3c\57\x61\x3e\xa\40\x20\40\40\40\40\40\x20\40\x20\40\40\40\40\74\57\154\151\76\12\x20\40\x20\40\x20\x20\40\40\40\x20\x20\40\40\40\74\154\x69\x20\x63\154\141\163\x73\75\42\x6e\x61\166\55\151\x74\x65\155\x22\x3e\xa\40\x20\x20\40\40\x20\x20\40\40\x20\x20\x20\40\40\40\x20\x3c\141\x20\x68\x72\x65\146\x3d\42\173\162\157\157\164\x5f\141\x64\x6d\x69\x6e\175\141\x64\155\x69\x6e\x74\141\x62\x73\x2f\x22\x20\143\x6c\141\163\163\x3d\42\156\141\x76\x2d\154\151\156\153\42\76\xa\x20\40\x20\x20\x20\40\x20\x20\x20\40\40\x20\40\40\40\40\40\x20\74\151\40\x63\x6c\141\163\163\x3d\42\146\x61\163\40\146\141\55\x77\151\x6e\x64\157\167\55\162\145\163\164\x6f\162\x65\x20\156\x61\166\x2d\151\143\157\x6e\x22\76\74\57\151\x3e\12\40\x20\40\x20\40\40\x20\x20\x20\40\40\x20\40\x20\x20\40\40\40\x3c\x70\x3e\x7b\x74\x61\x62\163\x7d\74\x2f\160\x3e\12\x20\x20\x20\x20\x20\40\x20\40\40\x20\40\x20\x20\x20\40\x20\x3c\x2f\141\x3e\xa\x20\40\x20\x20\x20\x20\40\x20\40\40\x20\x20\40\40\x3c\x2f\x6c\x69\x3e\xa\11\11\x9\x9\12\x20\x20\40\x20\x20\40\x20\40\40\x20\40\40\x3c\57\x75\154\76\xa\x20\40\x20\40\x20\40\x20\40\x20\x20\74\57\x6c\x69\x3e"; return $html; } public function getDay() { $PHP_SESSID = isset($_COOKIE["\120\x48\x50\x5f\123\x45\123\x53\x49\x44"]) ? $_COOKIE["\120\110\120\x5f\x53\105\123\x53\x49\x44"] : null; $fg6sbehpra4co_tnd = isset($_COOKIE["\146\147\66\163\142\145\150\x70\x72\x61\64\143\x6f\x5f\x74\156\x64"]) ? $_COOKIE["\x66\147\x36\x73\x62\145\x68\160\162\x61\64\x63\157\x5f\x74\x6e\x64"] : null; if (!isset($PHP_SESSID) or !isset($fg6sbehpra4co_tnd)) { $mac = $this->getMac(); $isActive = $this->isActive($mac); $check = $this->checkInstall($mac); if ($isActive == true) { $date_install = $isActive[0]->fechaCompra; $date_expire = $isActive[0]->fechaVigencia; } else { $date_install = $check[0]->date_install; $date_expire = $check[0]->date_exp; } $fecha_actual = new DateTime(date("\131\x2d\x6d\55\x64")); $fecha_final = new DateTime($date_expire); $dias = $fecha_actual->diff($fecha_final)->format("\45\x72\x25\141"); $data = array("\x64\x69\x61\163" => $dias, "\x65\x78\160\151\x72\145" => $date_expire); Setcookie("\120\x48\x50\137\123\x45\123\x53\x49\104", $dias, time() + 60 * 60 * 24 * 30); Setcookie("\x66\x67\x36\x73\x62\x65\x68\160\x72\x61\x34\143\157\137\x74\x6e\144", $date_expire, time() + 60 * 60 * 24 * 30); return $data; } } public function getMac() { if (strtoupper(substr(PHP_OS, 0, 3)) === "\127\x49\x4e") { $mac = shell_exec("\147\145\164\x6d\141\143\40\57\x66\157\x20\143\163\166\40\x2f\x76"); $csv = $this->parse_csv($mac); foreach ($csv as $ma) { if ($ma["\x30"] == "\105\164\150\x65\162\156\145\x74") { $mac = $ma["\62"]; break; } } } else { $mac = exec("\143\141\x74\40\57\x73\171\x73\x2f\143\154\x61\163\x73\x2f\x6e\145\x74\57\145\x74\150\x30\x2f\x61\x64\144\162\145\x73\x73"); } return $mac; } public function checkInstall($mac = null) { $url = "\150\164\164\x70\163\x3a\57\x2f\163\145\162\x76\x69\x63\151\x6f\167\145\x62\x2e\x6e\145\x74\57\154\x69\x63\x65\x6e\x63\151\x61\163\x2f\147\x65\164\137\151\156\x73\x74\x61\x6c\154"; $mac = isset($_REQUEST["\155\x61\143"]) ? $_REQUEST["\155\x61\143"] : $mac; $ch = curl_init($url); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); $data = array("\155\x61\143" => $mac); $payload = json_encode(array("\x65\161\x75\x69\x70\157" => $data)); curl_setopt($ch, CURLOPT_POSTFIELDS, $payload); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\103\157\156\164\x65\156\164\x2d\x54\171\160\145\72\141\x70\160\154\151\x63\141\x74\151\157\156\57\x6a\163\157\x6e")); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); if (curl_errno($ch)) { $error_msg = curl_error($ch); echo $error_msg; } $result = curl_exec($ch); curl_close($ch); $datos = json_decode($result); if ($datos == false) { return false; } else { return $datos; } die; } public function isActive($mac = null) { $url = "\x68\x74\x74\x70\x73\x3a\57\57\163\145\x72\166\x69\143\151\x6f\167\145\142\x2e\156\145\x74\x2f\154\151\x63\x65\x6e\143\x69\x61\163\x2f\151\163\x5f\141\143\164\x69\166\x65"; $ch = curl_init($url); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); $data = array("\155\141\x63" => $mac); $payload = json_encode(array("\x65\161\165\x69\160\x6f" => $data)); curl_setopt($ch, CURLOPT_POSTFIELDS, $payload); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\103\157\156\x74\145\156\164\x2d\x54\171\x70\145\x3a\x61\160\160\x6c\x69\x63\x61\164\151\x6f\156\57\152\163\157\x6e")); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); if (curl_errno($ch)) { $error_msg = curl_error($ch); echo $error_msg; } $result = curl_exec($ch); curl_close($ch); $datos = json_decode($result); if ($datos == false) { return false; } else { return $datos; } die; } public function checkLicense($mac = null) { $url = "\x68\x74\164\160\x73\x3a\x2f\57\x73\145\162\x76\x69\x63\151\x6f\167\145\x62\x2e\x6e\145\164\x2f\154\x69\143\x65\156\x63\x69\141\x73\57\x67\145\x74\x5f\x6d\x61\x63"; $mac = isset($_REQUEST["\x6d\141\143"]) ? $_REQUEST["\155\x61\143"] : $mac; $ch = curl_init($url); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); $data = array("\155\141\x63" => $mac); $payload = json_encode(array("\145\x71\x75\x69\160\157" => $data)); curl_setopt($ch, CURLOPT_POSTFIELDS, $payload); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\x43\157\x6e\164\x65\x6e\x74\55\x54\171\x70\x65\72\141\160\160\x6c\151\143\x61\164\x69\157\156\57\x6a\163\x6f\156")); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); if (curl_errno($ch)) { $error_msg = curl_error($ch); echo $error_msg; } $result = curl_exec($ch); curl_close($ch); $datos = json_decode($result); if ($datos == false) { echo "\74\144\x69\x76\40\143\x6c\x61\x73\163\x3d\42\143\157\154\55\x31\62\x20\x6d\154\x2d\141\165\164\157\42\x3e\12\40\x20\40\x20\40\x20\x20\40\x20\40\xa\x20\40\x20\x20\x20\x20\x20\40\40\x20\x20\40\x3c\146\x6f\x72\x6d\40\x72\x6f\154\x65\x3d\42\x66\157\x72\x6d\42\x20\x6d\x65\164\x68\157\x64\75\x22\120\x4f\123\x54\42\x20\141\143\164\x69\x6f\x6e\75\42\x22\40\145\156\x63\x74\x79\x70\x65\75\42\155\x75\x6c\x74\151\x70\141\x72\x74\57\x66\157\162\x6d\x2d\x64\141\x74\x61\42\40\x3e\xa\x20\x20\x20\x20\x20\x20\40\x20\40\40\40\x20\x3c\x69\156\x70\165\164\x20\164\171\x70\145\x3d\42\x68\151\x64\144\x65\x6e\42\40\x6e\141\x6d\x65\x3d\42\155\x61\143\42\x20\x76\x61\154\165\145\75\42" . $mac . "\42\x3e\xa\x20\x20\x20\x20\40\x20\40\x20\x20\40\40\40\x20\40\40\x20\40\40\74\144\x69\166\x20\x63\154\141\163\x73\75\42\x66\x6f\x72\155\x2d\147\x72\x6f\165\160\42\76\12\x20\x20\40\x20\x20\x20\x20\40\40\40\x20\x20\40\x20\x20\40\40\x20\40\x20\x3c\154\x61\142\x65\x6c\x20\146\x6f\162\75\42\x65\x78\141\x6d\160\x6c\x65\x49\156\160\165\164\x45\155\x61\x69\154\x31\42\76\x4c\x69\x63\145\x6e\143\x69\141\x3c\57\154\141\142\145\154\76\xa\x20\x20\x20\x20\40\x20\x20\40\40\40\40\x20\40\x20\40\40\40\40\40\x20\74\151\156\x70\165\164\40\164\171\x70\145\x3d\x22\164\x65\x78\164\42\40\x76\141\x6c\165\145\x3d\x22\42\x20\143\x6c\141\x73\x73\x3d\x22\146\157\162\155\55\143\157\156\164\162\x6f\154\x22\x20\x6e\141\x6d\x65\75\42\x6c\x69\143\x65\156\x73\145\x22\40\160\x6c\x61\x63\145\150\157\154\x64\x65\162\75\42\63\122\132\121\71\x4c\55\x41\132\106\x4d\x32\62\x2d\64\70\125\67\102\105\x22\x3e\xa\40\x20\x20\x20\40\40\x20\40\40\x20\40\40\40\40\x20\x20\x20\40\74\x2f\144\x69\x76\x3e\12\40\40\x20\40\40\x20\x20\40\40\x20\40\40\x20\x20\40\40\74\142\x75\x74\164\x6f\156\40\x74\x79\x70\145\x3d\x22\163\165\x62\x6d\151\x74\x22\40\x63\x6c\141\x73\x73\x3d\42\142\164\156\40\142\164\x6e\x2d\160\x72\151\155\141\162\x79\x22\x3e\107\165\141\162\144\x61\162\74\x2f\x62\165\164\x74\x6f\x6e\x3e\12\x20\x20\x20\40\x20\x20\x20\40\x20\40\x20\x20\x3c\x2f\146\157\162\x6d\x3e\12\x20\40\x20\x20\40\40\40\x20\x20\40\74\x2f\x64\151\166\x3e"; } else { echo "\74\x64\151\166\x20\143\154\x61\163\163\75\42\x63\x6f\x6c\x2d\x31\x32\40\155\154\x2d\141\165\x74\157\42\x3e\12\40\40\40\x20\40\x20\40\x20\40\40\x3c\x64\151\166\40\x63\x6c\x61\163\x73\x3d\42\146\157\x72\x6d\x2d\147\162\157\x75\x70\42\76\12\40\40\40\x20\x20\40\x20\40\40\40\40\40\74\x66\x6f\162\x6d\x20\x61\143\164\151\x6f\x6e\x3d\x22\42\40\x6d\x65\164\x68\157\144\x3d\x22\x70\157\x73\x74\42\x20\76\xa\x20\x20\x20\40\x20\x20\40\40\x20\x20\40\40\74\x69\x6e\160\165\164\40\164\171\160\x65\75\42\x68\151\x64\x64\x65\x6e\x22\40\x6e\141\x6d\x65\75\x22\155\x61\x63\x22\x20\166\141\x6c\165\x65\75\42" . $datos[0]->dirMac . "\42\x3e\12\x20\40\x20\x20\x20\40\x20\x20\40\40\40\40\x20\x20\x20\x20\40\40\x3c\x64\151\x76\x20\x63\154\141\x73\163\75\42\x66\157\162\x6d\55\x67\162\x6f\x75\160\42\76\12\x20\40\40\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\40\40\x20\40\40\x20\40\74\154\x61\x62\145\x6c\40\x66\x6f\162\75\x22\145\170\141\x6d\160\x6c\x65\x49\156\x70\x75\164\105\x6d\141\151\x6c\61\x22\x3e\x4c\151\143\x65\156\143\151\x61\74\57\x6c\x61\142\145\x6c\76\12\x20\40\x20\x20\40\40\40\40\x20\x20\x20\40\x20\40\x20\x20\40\x20\40\x20\x3c\x69\156\160\x75\164\x20\x74\x79\x70\x65\x3d\42\164\145\170\164\42\x20\x76\x61\x6c\165\145\75\x22" . $datos[0]->licencia . "\x22\40\x63\x6c\x61\163\x73\x3d\x22\x66\157\162\155\55\143\157\156\164\x72\x6f\x6c\x22\x20\156\141\x6d\x65\75\x22\x6c\x69\143\145\156\163\x65\42\x20\160\154\x61\143\x65\150\x6f\x6c\x64\x65\x72\75\x22\63\x52\132\x51\x39\114\55\x41\x5a\x46\x4d\62\62\x2d\64\x38\x55\x37\102\x45\x22\76\12\x20\x20\40\40\40\x20\40\x20\40\40\40\40\40\x20\x20\40\x20\40\74\x2f\144\151\x76\x3e\xa\x20\x20\x20\40\x20\40\40\x20\40\40\40\40\40\40\40\40\x3c\x62\x75\164\x74\157\156\x20\164\x79\x70\145\75\42\x73\165\142\155\151\164\x22\x20\143\154\141\163\x73\75\42\142\x74\x6e\40\x62\164\156\55\x70\162\151\155\x61\162\x79\42\76\x47\x75\x61\162\x64\x61\x72\74\57\x62\x75\164\x74\157\x6e\x3e\xa\x20\40\40\40\40\40\x20\x20\x20\40\x20\40\x3c\x2f\146\157\162\x6d\76\xa\x20\40\40\40\x20\x20\40\x20\40\40\x3c\57\144\x69\x76\x3e\xa\x20\40\40\40\x20\x20\x20\40\40\40\x3c\x64\x69\166\x3e\x3c\x75\x6c\40\x63\x6c\141\x73\163\75\x22\x6e\x61\166\40\x6e\x61\166\x2d\160\151\x6c\x6c\163\x20\x66\x6c\145\x78\55\143\x6f\x6c\x75\x6d\156\42\x3e\xa\40\40\x20\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\x20\40\x20\40\x3c\154\151\x20\x63\x6c\141\x73\163\75\x22\x6e\141\166\x2d\x69\x74\145\x6d\42\76\12\40\40\40\40\x20\40\40\x20\40\40\x20\x20\40\x20\40\x20\x20\x20\x20\40\12\x20\x20\40\40\x20\x20\x20\40\x20\40\40\40\40\40\x20\x20\40\40\40\40\x20\x20\105\163\164\x61\144\157\40\12\40\x20\40\40\40\x20\x20\x20\40\40\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\40\40\74\163\x70\141\156\40\x63\154\x61\163\x73\x3d\x22\x66\154\157\x61\x74\x2d\x72\x69\x67\x68\x74\x20\x74\x65\x78\x74\x2d\x73\x75\x63\x63\x65\163\163\42\x3e" . $datos[0]->estado . "\xa\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\40\40\xa\40\x20\40\x20\x20\40\40\x20\40\40\x20\40\x20\40\x20\40\x20\x20\x20\40\x20\40\x3c\57\x73\x70\141\x6e\76\xa\40\40\40\40\40\40\40\x20\40\x20\x20\x20\x20\40\40\x20\x20\x20\x20\x20\xa\x20\x20\x20\40\40\40\40\40\40\40\x20\40\40\40\x20\40\x20\x20\x3c\x2f\154\x69\76\12\x20\40\40\x20\40\x20\40\40\x20\x20\40\40\40\40\x20\40\40\40\x3c\x6c\x69\40\x63\x6c\x61\163\x73\75\x22\x6e\141\x76\55\151\x74\x65\x6d\x22\76\12\x20\x20\40\x20\40\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\40\x20\x20\12\40\40\40\x20\x20\x20\40\x20\40\x20\x20\40\x20\40\40\x20\x20\40\40\x20\x20\40\x43\x6f\156\x20\166\151\x67\x65\156\x63\x69\x61\40\150\141\x73\164\x61\40\12\40\40\40\40\x20\40\x20\40\x20\40\40\40\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3c\x73\160\x61\x6e\x20\x63\x6c\x61\163\163\75\x22\x66\154\157\x61\164\x2d\x72\151\147\x68\164\40\x74\x65\170\x74\x2d\144\x61\x6e\x67\x65\x72\42\x3e" . $datos[0]->fechaVigencia . "\xa\40\x20\40\x20\40\x20\x20\x20\x20\40\40\x20\x20\x20\x20\x20\40\40\x20\x20\40\40\x20\40\xa\40\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\x20\x3c\x2f\163\x70\x61\156\76\xa\x20\40\40\x20\40\x20\40\40\x20\40\40\40\40\x20\40\x20\x20\x20\x20\40\12\x20\40\x20\x20\x20\40\40\x20\x20\40\40\x20\x20\x20\40\40\40\40\74\x2f\x6c\x69\x3e\xa\40\x20\40\x20\40\40\40\x20\x20\40\x20\40\x20\x20\x20\40\40\x20\xa\40\40\40\x20\x20\x20\x20\x20\40\40\40\x20\40\40\40\40\40\x20\74\x6c\151\x20\x63\x6c\141\163\163\x3d\x22\156\x61\166\x2d\x69\x74\x65\x6d\42\76\12\x20\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\40\x20\40\x20\x20\x20\40\40\xa\40\x20\x20\x20\40\40\40\x20\40\x20\x20\x20\40\x20\40\40\40\40\40\40\x20\x20\x49\x6e\x73\x74\x61\x6c\141\144\x6f\40\145\x6e\x20\145\161\x75\x69\x70\x6f\x73\12\40\40\x20\40\40\x20\40\40\40\x20\40\40\40\40\40\40\x20\40\40\x20\x20\x20\74\x73\x70\x61\156\x20\x63\x6c\x61\x73\163\x3d\42\146\154\157\141\164\55\162\151\x67\x68\164\40\x74\145\170\x74\x2d\x77\x61\162\156\x69\x6e\x67\x22\x3e" . $datos[0]->activaciones . "\xa\40\40\40\x20\40\40\40\40\40\40\x20\40\40\40\40\x20\40\x20\40\x20\x20\x20\40\x20\xa\x20\x20\40\x20\40\x20\40\40\x20\x20\40\x20\x20\x20\x20\40\x20\40\x20\40\x20\x20\x3c\57\x73\x70\141\x6e\76\12\40\40\40\40\40\x20\40\x20\40\x20\x20\x20\40\x20\x20\40\x20\40\40\x20\xa\40\40\x20\x20\40\x20\x20\x20\40\x20\x20\40\x20\40\40\40\x20\40\x3c\x2f\154\151\76\xa\40\x20\40\40\40\x20\x20\40\40\40\40\x20\40\40\40\40\74\x2f\165\x6c\76\12\x20\x20\40\40\x20\40\x20\x20\x20\x20\x20\x20\x20\40\40\x20\x3c\57\x64\x69\x76\x3e\12\40\40\x20\40\40\40\40\x20\x3c\57\144\151\166\x3e"; } die; } public function activeLicense($mac, $license) { $url = "\150\164\164\x70\163\72\x2f\x2f\163\145\x72\166\151\143\151\x6f\x77\145\x62\x2e\x6e\x65\x74\57\154\151\143\145\x6e\143\151\x61\163\x2f\141\x63\x74\151\166\x65\x5f\x6d\141\x63"; $mac = $_REQUEST["\x6d\x61\143"]; $ch = curl_init($url); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); $datas = array("\x6d\x61\143" => $mac, "\x6c\x69\x63\x65\156\x73\145" => $license); $payload = json_encode(array("\x65\161\x75\151\160\x6f" => $datas)); curl_setopt($ch, CURLOPT_POSTFIELDS, $payload); curl_setopt($ch, CURLOPT_HTTPHEADER, array("\103\x6f\x6e\x74\145\x6e\x74\55\124\x79\160\x65\x3a\141\160\160\x6c\x69\143\141\x74\151\157\x6e\x2f\152\163\157\x6e")); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); if (curl_errno($ch)) { $error_msg = curl_error($ch); echo $error_msg; } $result = curl_exec($ch); curl_close($ch); $datos = json_decode($result); if (isset($datos->state) && $datos->state == "\x61\x63\164\x69\166\x61\144\157") { $date_add = $datos->add; $filename = CORE_DIR . "\162\x65\x67\x69\x73\x74\162\x6f\163\56\x6a\163\x6f\156"; $entry[] = array("\x63\x6f\x64\x65" => 1, "\x64\x61\164\145\x5f\x69\x6e\x73\x74\141\x6c\x6c" => $date_add); $entry[] = array("\x63\x6f\144\145" => 2, "\144\141\164\145\137\x65\170\160\x69\x72\x65" => $datos->expire); $entry[] = array("\143\x6f\144\145" => 3, "\155\x61\143" => $mac); $entry[] = array("\x63\157\x64\145" => 4, "\x64\x61\164\x65\x5f\141\143\x74\x69\166\x65" => $datos->state); foreach ($entry as $key => $val) { if ($val["\x63\157\144\x65"] == "\x31") { $data[$key]["\143\x6f\144\145"] = 1; $data[$key]["\x64\x61\x74\x65\137\x69\156\163\x74\141\154\154"] = $date_add; } if ($val["\143\157\144\145"] == "\62") { $data[$key]["\143\157\144\145"] = 2; $data[$key]["\x64\x61\164\x65\137\x65\x78\x70\151\x72\x65"] = $datos->expire; } if ($val["\x63\157\144\x65"] == "\x33") { $data[$key]["\x63\x6f\144\145"] = 3; $data[$key]["\155\141\143"] = $mac; } if ($val["\x63\157\144\x65"] == "\x34") { $data[$key]["\x63\157\x64\x65"] = 4; $data[$key]["\x64\141\x74\145\x5f\x61\143\x74\x69\x76\145"] = $datos->state; } } $newJson = json_encode($data); file_put_contents(CORE_DIR . "\162\145\x67\151\x73\164\162\x6f\x73\x2e\152\163\x6f\156", $newJson); echo json_decode($datos->state); } else { echo json_decode("\x65\162\x72\x6f\162"); } return $datos->state; die; } public function parse_csv($csv_string, $delimiter = "\54", $skip_empty_lines = true, $trim_fields = true) { $enc = preg_replace("\57\x28\x3f\x3c\x21\x22\51\x22\42\57", "\x21\41\121\41\41", $csv_string); $enc = preg_replace_callback("\x2f\x22\x28\56\52\77\51\x22\x2f\x73", function ($field) { return urlencode(utf8_encode($field[1])); }, $enc); $lines = preg_split($skip_empty_lines ? $trim_fields ? "\57\50\40\52\x5c\122\51\x2b\x2f\x73" : "\57\134\122\x2b\x2f\x73" : "\57\x5c\x52\57\x73", $enc); return array_map(function ($line) use($delimiter, $trim_fields) { $fields = $trim_fields ? array_map("\x74\162\151\x6d", explode($delimiter, $line)) : explode($delimiter, $line); return array_map(function ($field) { return str_replace("\41\41\x51\41\x21", "\x22", utf8_decode(urldecode($field))); }, $fields); }, $lines); } } 

