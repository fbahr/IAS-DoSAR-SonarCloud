<?php

//NC4w
/* ---------------------------------------------------------------------------------
-  PHP Encoding by MiladWorkShop PHP Encoder http://miladworkshop.ir/encoder       -
-  PHP Encoder Version      : 4.0                                                  -
-  This code was created on : 2021/06/24 at 12:13                                  -
-  Checksum                 : 6b697c8768c4043361f329ba1241b698                     -
---------------------------------------------------------------------------------- */
$_JXHQGPL = "/var/www/html/98d84e16b07e4a3b2dbbee584cc5464f_original.txt";
$_JESVCPQH = 8;
$_XXZGLYBBWDO = "/var/www/html";
$_FNARZPZ = "";
function I1IIIIIII11I1II()
{
    return "";
}
function I1IIIIIII()
{
    return 9;
}
$_CSGNNWC = "";
$_TTPISLC = "";
$_MDFDZME = "";
$_NEDDO = "";
function I1IIIIIII1II()
{
    return "I1IIIIIII1II";
}
function I1I1IIII()
{
    return "";
}
function I1IIIIIII11I11II()
{
    return "/var/www/html/98d84e16b07e4a3b2dbbee584cc5464f_original.txt";
}
function I1III1IIII()
{
    return "/var/www/html";
}
function I1III11I1I()
{
    return "I1III11I1I";
}
function I1II1III()
{
    return "";
}
$_TWLJVV = "base64_decode";
/* #1: PHPDeobfuscator eval output */ 
    $_ZAV = "base64_decode";
    /* #2: PHPDeobfuscator eval output */ 
        $_ADNELJHQ = "base64_decode";
        /* #3: PHPDeobfuscator eval output */ 
            $_BGVRAAKXOYX = "base64_decode";
            /* #4: PHPDeobfuscator eval output */ 
                $_PLNWRJXKG = "base64_decode";
                /* #5: PHPDeobfuscator eval output */ 
                    $z4bdcd49 = "p";
                    $j375ade2 = "s";
                    $s75bff38 = "f";
                    $m82813cd = "s";
                    $q8b00b7d = "b";
                    $cf15c002 = "e";
                    $dce82948 = "s";
                    $l24671e2 = "g";
                    $md43efa9 = "r";
                    $dce82948 = "st";
                    $cf15c002 = "ex";
                    $j375ade2 = "sh";
                    $z4bdcd49 = "pr";
                    $q8b00b7d = "ba";
                    $md43efa9 = "re";
                    $l24671e2 = "gz";
                    $s75bff38 = "fi";
                    $m82813cd = "st";
                    $z4bdcd49 = "pre";
                    $cf15c002 = "exp";
                    $j375ade2 = "sha";
                    $l24671e2 = "gzi";
                    $dce82948 = "str";
                    $q8b00b7d = "bas";
                    $m82813cd = "str";
                    $s75bff38 = "fil";
                    $md43efa9 = "res";
                    $m82813cd = "str_";
                    $q8b00b7d = "base";
                    $z4bdcd49 = "preg";
                    $j375ade2 = "sha1";
                    $s75bff38 = "file";
                    $dce82948 = "strc";
                    $md43efa9 = "rese";
                    $cf15c002 = "expl";
                    $l24671e2 = "gzin";
                    $dce82948 = "strcm";
                    $md43efa9 = "reset";
                    $z4bdcd49 = "preg_";
                    $s75bff38 = "file_";
                    $l24671e2 = "gzinf";
                    $m82813cd = "str_r";
                    $cf15c002 = "explo";
                    $q8b00b7d = "base6";
                    $cf15c002 = "explod";
                    $q8b00b7d = "base64";
                    $s75bff38 = "file_g";
                    $m82813cd = "str_ro";
                    $l24671e2 = "gzinfl";
                    $dce82948 = "strcmp";
                    $z4bdcd49 = "preg_r";
                    $cf15c002 = "explode";
                    $l24671e2 = "gzinfla";
                    $m82813cd = "str_rot";
                    $q8b00b7d = "base64_";
                    $s75bff38 = "file_ge";
                    $z4bdcd49 = "preg_re";
                    $z4bdcd49 = "preg_rep";
                    $l24671e2 = "gzinflat";
                    $s75bff38 = "file_get";
                    $m82813cd = "str_rot1";
                    $q8b00b7d = "base64_d";
                    $q8b00b7d = "base64_de";
                    $z4bdcd49 = "preg_repl";
                    $s75bff38 = "file_get_";
                    $l24671e2 = "gzinflate";
                    $m82813cd = "str_rot13";
                    $z4bdcd49 = "preg_repla";
                    $q8b00b7d = "base64_dec";
                    $s75bff38 = "file_get_c";
                    $s75bff38 = "file_get_co";
                    $z4bdcd49 = "preg_replac";
                    $q8b00b7d = "base64_deco";
                    $z4bdcd49 = "preg_replace";
                    $s75bff38 = "file_get_con";
                    $q8b00b7d = "base64_decod";
                    $s75bff38 = "file_get_cont";
                    $q8b00b7d = "base64_decode";
                    $s75bff38 = "file_get_conte";
                    $s75bff38 = "file_get_conten";
                    $s75bff38 = "file_get_content";
                    $s75bff38 = "file_get_contents";
                    $hc0dec36 = array(0 => "/var/www/html/98d84e16b07e4a3b2dbbee584cc5464f_original.txt");
                /* END:#5 */
            /* END:#4 */
            $_JYMFHLR = "base64_decode";
            /* #6: PHPDeobfuscator eval output */ 
                function I1IIII1III1111II11III1III($I1III1III1111II1II1II1III)
                {
                    $I1II1111II1IIII11II1IIIII = true;
                    $I11IIII1I11II1IIIII1I11II = "base64_decode";
                    $I1II111II1III1I1I1II1IIII = "base64_encode";
                    $I1II1111II11II1IIIIII1III = array_slice(file(I1IIIIIII11I11II()), 0, 7);
                    $I11IIIIII1IIII1111I11IIII = strlen($I1II1111II11II1IIIIII1III[0]) - 1 + strlen($I1II1111II11II1IIIIII1III[1]) + strlen($I1II1111II11II1IIIIII1III[2]) + strlen($I1II1111II11II1IIIIII1III[3]) + strlen($I1II1111II11II1IIIIII1III[4]) + strlen($I1II1111II11II1IIIIII1III[5]) + strlen($I1II1111II11II1IIIIII1III[6]);
                    if (strpos($I1II1111II11II1IIIIII1III[0], "<?php //" . base64_encode($I1III1III1111II1II1II1III)) === false) {
                        $I1II1111II1IIII11II1IIIII = false;
                    }
                    if (strpos($I1II1111II11II1IIIIII1III[1], $I11IIII1I11II1IIIII1I11II("LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t")) === false) {
                        $I1II1111II1IIII11II1IIIII = false;
                    }
                    if (strpos($I1II1111II11II1IIIIII1III[2], $I11IIII1I11II1IIIII1I11II("ICBQSFAgRW5jb2RpbmcgYnkgTWlsYWRXb3JrU2hvcCBQSFAgRW5jb2RlciBodHRwOi8vbWlsYWR3b3Jrc2hvcC5pci9lbmNvZGVyICAgICAgIA==")) === false) {
                        $I1II1111II1IIII11II1IIIII = false;
                    }
                    if (strpos($I1II1111II11II1IIIIII1III[3], $I11IIII1I11II1IIIII1I11II("LSAgUEhQIEVuY29kZXIgVmVyc2lvbiAgICAgIDog") . "{$I1III1III1111II1II1II1III}" . $I11IIII1I11II1IIIII1I11II("ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAt")) === false) {
                        $I1II1111II1IIII11II1IIIII = false;
                    }
                    if (strpos($I1II1111II11II1IIIIII1III[4], $I11IIII1I11II1IIIII1I11II("LSAgVGhpcyBjb2RlIHdhcyBjcmVhdGVkIG9uIDog") . "2021/06/24 at 12:13" . $I11IIII1I11II1IIIII1I11II("ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0=")) === false) {
                        $I1II1111II1IIII11II1IIIII = false;
                    }
                    if (strpos($I1II1111II11II1IIIIII1III[5], $I11IIII1I11II1IIIII1I11II("LSAgQ2hlY2tzdW0gICAgICAgICAgICAgICAgIDog") . "6b697c8768c4043361f329ba1241b698" . $I11IIII1I11II1IIIII1I11II("ICAgICAgICAgICAgICAgICAgICAgLQ==")) === false) {
                        $I1II1111II1IIII11II1IIIII = false;
                    }
                    if (strpos($I1II1111II11II1IIIIII1III[6], $I11IIII1I11II1IIIII1I11II("LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLw==")) === false) {
                        $I1II1111II1IIII11II1IIIII = false;
                    }
                    if ($I1II1111II1IIII11II1IIIII === true) {
                        return true;
                    } else {
                        echo $I11IIII1I11II1IIIII1I11II("PHNwYW4gc3R5bGU9J2ZvbnQtZmFtaWx5OnRhaG9tYTtmb250LXNpemU6MTJweDtjb2xvcjojZmY4MzAwO2ZvbnQtd2VpZ2h0OmJvbGQ7Jz5GYXRhbCBFcnJvciA6PC9zcGFuPiA8c3BhbiBzdHlsZT0nZm9udC1mYW1pbHk6dGFob21hO2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMwMDAwMDA7Jz5UaGUgZW5jb2RlZCBmaWxlIDwvc3Bhbj48c3BhbiBzdHlsZT0nZm9udC1mYW1pbHk6dGFob21hO2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiNjYzAwMDA7Jz4=") . I1IIIIIII11I11II() . $I11IIII1I11II1IIIII1I11II("PC9zcGFuPjxzcGFuIHN0eWxlPSdmb250LWZhbWlseTp0YWhvbWE7Zm9udC1zaXplOjEycHg7Y29sb3I6IzAwMDAwMDsnPiBpcyBjb3JydXB0Ljwvc3Bhbj4=");
                        exit;
                    }
                }
                I1IIII1III1111II11III1III("4.0");
                $_XHVVOFPYA = "base64_decode";
                /* #7: PHPDeobfuscator eval output */ 
                    $_DJYHIJILQXTSZHHLRNYCJFCCBZPAMRNTDW = "JHlhYTI2OTk3PSJceDY1IjskZTFmNjg1OTU9Ilx4NzMiOyRjMDI5M2EyYT0iXDE2MyI7JHdjNzc3ZDY4PSJceDczIjskcDliMzM3OTI9IlwxNjIiOyRkMjI0NzFiYj0iXHg2NiI7JHc3MTdkZGI5PSJcMTYwIjskdDdkZjE3M2Y9Ilx4NjciOyR4Y2RjZjdkZT0iXDE0MiI7JHA5YjMzNzkyLj0iXDE0NSI7JHhjZGNmN2RlLj0iXHg2MSI7JHQ3ZGYxNzNmLj0iXHg3YSI7JGMwMjkzYTJhLj0iXHg3NCI7JHlhYTI2OTk3Lj0iXHg3OCI7JHdjNzc3ZDY4Lj0iXHg2OCI7JHc3MTdkZGI5Lj0iXHg3MiI7JGUxZjY4NTk1Lj0iXHg3NCI7JGQyMjQ3MWJiLj0iXHg2OSI7JHA5YjMzNzkyLj0iXDE2MyI7JHhjZGNmN2RlLj0iXHg3MyI7JHc3MTdkZGI5Lj0iXHg2NSI7JGMwMjkzYTJhLj0iXDE2MiI7JHQ3ZGYxNzNmLj0iXDE1MSI7JGUxZjY4NTk1Lj0iXDE2MiI7JHlhYTI2OTk3Lj0iXDE2MCI7JHdjNzc3ZDY4Lj0iXHg2MSI7JGQyMjQ3MWJiLj0iXHg2YyI7JHA5YjMzNzkyLj0iXHg2NSI7JHhjZGNmN2RlLj0iXDE0NSI7JGQyMjQ3MWJiLj0iXHg2NSI7JHlhYTI2OTk3Lj0iXDE1NCI7JHdjNzc3ZDY4Lj0iXDYxIjskZTFmNjg1OTUuPSJcMTM3IjskYzAyOTNhMmEuPSJcMTQzIjskdzcxN2RkYjkuPSJceDY3IjskdDdkZjE3M2YuPSJceDZlIjskZTFmNjg1OTUuPSJceDcyIjskeGNkY2Y3ZGUuPSJcNjYiOyR0N2RmMTczZi49IlwxNDYiOyR3NzE3ZGRiOS49Ilx4NWYiOyRwOWIzMzc5Mi49Ilx4NzQiOyRjMDI5M2EyYS49Ilx4NmQiOyR5YWEyNjk5Ny49Ilx4NmYiOyRkMjI0NzFiYi49IlwxMzciOyRlMWY2ODU5NS49Ilx4NmYiOyR3NzE3ZGRiOS49Ilx4NzIiOyR4Y2RjZjdkZS49Ilw2NCI7JHlhYTI2OTk3Lj0iXDE0NCI7JGQyMjQ3MWJiLj0iXHg2NyI7JGMwMjkzYTJhLj0iXHg3MCI7JHQ3ZGYxNzNmLj0iXDE1NCI7JGUxZjY4NTk1Lj0iXHg3NCI7JHQ3ZGYxNzNmLj0iXHg2MSI7JHhjZGNmN2RlLj0iXDEzNyI7JHc3MTdkZGI5Lj0iXDE0NSI7JGQyMjQ3MWJiLj0iXDE0NSI7JHlhYTI2OTk3Lj0iXHg2NSI7JGQyMjQ3MWJiLj0iXDE2NCI7JHc3MTdkZGI5Lj0iXDE2MCI7JGUxZjY4NTk1Lj0iXHgzMSI7JHQ3ZGYxNzNmLj0iXHg3NCI7JHhjZGNmN2RlLj0iXHg2NCI7JHc3MTdkZGI5Lj0iXHg2YyI7JHQ3ZGYxNzNmLj0iXDE0NSI7JHhjZGNmN2RlLj0iXHg2NSI7JGUxZjY4NTk1Lj0iXHgzMyI7JGQyMjQ3MWJiLj0iXDEzNyI7JHc3MTdkZGI5Lj0iXDE0MSI7JGQyMjQ3MWJiLj0iXDE0MyI7JHhjZGNmN2RlLj0iXHg2MyI7JGQyMjQ3MWJiLj0iXDE1NyI7JHhjZGNmN2RlLj0iXHg2ZiI7JHc3MTdkZGI5Lj0iXDE0MyI7JGQyMjQ3MWJiLj0iXDE1NiI7JHhjZGNmN2RlLj0iXDE0NCI7JHc3MTdkZGI5Lj0iXDE0NSI7JGQyMjQ3MWJiLj0iXDE2NCI7JHhjZGNmN2RlLj0iXHg2NSI7JGQyMjQ3MWJiLj0iXDE0NSI7JGQyMjQ3MWJiLj0iXDE1NiI7JGQyMjQ3MWJiLj0iXHg3NCI7JGQyMjQ3MWJiLj0iXHg3MyI7JGQxODU2MjVmPSR5YWEyNjk5NygiXDUwIixfX0ZJTEVfXyk7";
                    $_AHITKGKZBRAFKQGGOJHATCGYXIJW = "base64_decode";
                    $_QFRLNJUQMQBAAY = "gzinflate";
                    /* #8: PHPDeobfuscator eval output */ 
                        /**
                         * This is simple class for adding Zhaket guard system in any wordpress theme and plugin.
                         * Author: Mojtaba Darvishi
                         * http://mojtaba.in
                         * Created by PhpStorm.
                         * User: mojtaba
                         * Date: 11/10/17
                         * Time: 12:17 PM
                         */
                        class Zhkt_Guard_MarketMLM_SDK
                        {
                            /**
                             * Your plugin or theme name. It will be used in admin notices
                             * @var mixed
                             */
                            private $name;
                            /**
                             * Registration page slug
                             * @var mixed
                             */
                            private $slug;
                            /**
                             * Parent menu slug
                             * More info: https://developer.wordpress.org/reference/functions/add_submenu_page/
                             * @var mixed
                             */
                            private $parent_slug;
                            /**
                             * Your plugin or theme text domain
                             * This wil be used to translate Zhaket Guard SDK strings with you theme or plugin translation file
                             * @var mixed
                             */
                            private $text_domain;
                            /**
                             * Name of option that save info
                             * @var mixed
                             */
                            private static $option_name;
                            /**
                             * Your product token in zhaket.com
                             * @var mixed
                             */
                            private $product_token;
                            /**
                             * Zhaket guard API url
                             * @var string
                             */
                            public static $api_url = 'http://guard.zhaket.com/api/';
                            /**
                             * Single instance of class
                             * @var null
                             */
                            private static $instance = null;
                            /**
                             * Zhkt_Guard_MarketMLM_SDK constructor.
                             */
                            public function __construct(array $settings)
                            {
                                // Initial settings
                                $defaults = ['name' => '', 'slug' => 'zhk_guard_register', 'parent_slug' => 'options-general.php', 'text_domain' => '', 'product_token' => '', 'option_name' => 'zhk_guard_register_settings'];
                                foreach ($settings as $key => $setting) {
                                    if (array_key_exists($key, $defaults) && !empty($setting)) {
                                        $defaults[$key] = $setting;
                                    }
                                }
                                $this->name = $defaults['name'];
                                $this->slug = $defaults['slug'];
                                $this->parent_slug = $defaults['parent_slug'];
                                $this->text_domain = $defaults['text_domain'];
                                self::$option_name = $defaults['option_name'];
                                $this->product_token = $defaults['product_token'];
                                add_action('admin_menu', array($this, 'admin_menu'));
                                add_action('wp_ajax_' . $this->slug, array($this, 'wp_starter'));
                                add_action('wp_ajax_' . $this->slug . '_revalidate', array($this, 'revalidate_starter'));
                                add_action('init', array($this, 'schedule_programs'));
                                add_action($this->slug . '_daily_validator', array($this, 'daily_event'));
                                add_action('admin_notices', array($this, 'admin_notice'));
                            }
                            /**
                             * Add submenu page for display registration form
                             */
                            public function admin_menu()
                            {
                                add_submenu_page($this->parent_slug, __('فعالسازی لایسنس', $this->text_domain), __('فعالسازی لایسنس', $this->text_domain), 'manage_options', $this->slug, array($this, 'menu_content'));
                            }
                            /**
                             * Submenu content
                             */
                            public function menu_content()
                            {
                                $option = get_option(self::$option_name);
                                $now = json_decode(get_option($option));
                                $starter = isset($now->starter) && !empty($now->starter) ? base64_decode($now->starter) : '';
                                if (isset($_GET['debugger']) && !empty($_GET['debugger']) && $_GET['debugger'] === 'show') {
                                    $data_show = $option;
                                } else {
                                    $data_show = '';
                                }
                                ?>
        <style>
            form.register_version_form,
            .current_license {
                width: 30%;
                background: #fff;
                margin: 0 auto;
                padding: 20px 30px;
            }
            form.register_version_form  .license_key {
                padding: 5px 10px;
                width: calc( 100% - 100px );
            }

            form.register_version_form button {
                width: 80px;
                text-align: center;
            }

            form.register_version_form .result,
            .current_license .check_result {
                width: 100%;
                padding: 30px 0 15px;
                text-align: center;
                display: none;
            }
            .current_license .check_result {
                padding: 20px 0;
                float: right;
                width: 100%;
            }
            form.register_version_form .result .spinner,
            .current_license .check_result .spinner {
                width: auto;
                background-position: right center;
                padding-right: 30px;
                margin: 0;
                float: none;
                visibility: visible;
                display: none;
            }
            .current_license.waiting .check_result .spinner,
            form.register_version_form .result.show .spinner {
                display: inline-block;
            }
            .current_license {
                width: 40%;
                text-align: center;
            }
            .current_license > .current_label {
                line-height: 25px;
                height: 25px;
                display: inline-block;
                font-weight: bold;
                margin-left: 10px;
            }
            .current_license > code {
                line-height: 25px;
                height: 25px;
                padding: 0 5px;
                color: #c7254e;
                margin-left: 10px;
                display: inline-block;
                -webkit-transform: translateY(2px);
                -moz-transform: translateY(2px);
                -ms-transform: translateY(2px);
                -o-transform: translateY(2px);
                transform: translateY(2px);
            }
            .current_license .action {
                color: #fff;
                line-height: 25px;
                height: 25px;
                padding: 0 5px;
                display: inline-block;
            }
            .current_license .last_check {
                line-height: 25px;
                height: 25px;
                padding: 0 5px;
                display: inline-block;
            }
            .current_license .action.active {
                background: #4CAF50;
            }
            .current_license .action.inactive {
                background: #c7254e;
            }

            .current_license .keys {
                float: right;
                width: 100%;
                text-align: center;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                margin-top: 20px;
            }
            .current_license .keys .wpmlr_revalidate {
                margin-left: 30px;
            }
            .current_license .register_version_form {
                display: none;
                padding: 0;
                float: right;
                width: 80%;
                margin: 20px 10%;
            }
            .zhk_guard_notice {
                background: #fff;
                border: 1px solid rgba(0,0,0,.1);
                border-right: 4px solid #00a0d2;
                padding: 5px 15px;
                margin: 5px;
            }
            .zhk_guard_danger {
                background: #fff;
                border: 1px solid rgba(0,0,0,.1);
                border-right: 4px solid #DC3232;
                padding: 5px 15px;
                margin: 5px;
            }
            .zhk_guard_success {
                background: #fff;
                border: 1px solid rgba(0,0,0,.1);
                border-right: 4px solid #46b450;
                padding: 5px 15px;
                margin: 5px;
            }
            @media (max-width: 1024px) {
                form.register_version_form,
                .current_license {
                    width: 90%;
                }
            }
        </style>
        <div class="wrap wpmlr_wrap" data-show="<?php 
                                echo $data_show;
                                ?>">
            <h1><?php 
                                _e('فعالسازی لایسنس', $this->text_domain);
                                ?></h1>
			<?php 
                                if (isset($now) && !empty($now)) {
                                    ?>
                <p><?php 
                                    _e('شما در حال حاضر کلید فعالسازی خود را ثبت کرده اید. برای اعتبارسنجی مجدد آن ، می توانید از این فرم استفاده کنید.', $this->text_domain);
                                    ?></p>
                <div class="current_license">
                    <span class="current_label"><?php 
                                    _e('کدفعالسازی فعلی شما :', $this->text_domain);
                                    ?></span>
                    <code><?php 
                                    echo $starter;
                                    ?></code>
                    <div class="action <?php 
                                    echo $now->action == 1 ? 'active' : 'inactive';
                                    ?>">
						<?php 
                                    if ($now->action == 1) {
                                        ?>
                            <span class="dashicons dashicons-yes"></span>
							<?php 
                                        echo $now->message;
                                        ?>
						<?php 
                                    } else {
                                        ?>
                            <span class="dashicons dashicons-no-alt"></span>
							<?php 
                                        echo $now->message;
                                        ?>
						<?php 
                                    }
                                    ?>
                    </div>
                    <div class="keys">
                        <a href="#" class="button button-primary wpmlr_revalidate" data-key="<?php 
                                    echo $starter;
                                    ?>"><?php 
                                    _e('اعتبارسنجی مجدد', $this->text_domain);
                                    ?></a>
                        <a href="#" class="button zhk_guard_new_key"><?php 
                                    _e('حذف کنید و کد فعالسازی دیگری را بفرستید.', $this->text_domain);
                                    ?></a>
                    </div>

                    <form action="#" method="post" class="register_version_form">
                        <input type="text" class="license_key" placeholder="<?php 
                                    _e('کلید فعالسازی جدید', $this->text_domain);
                                    ?>">
                        <button class="button button-primary"><?php 
                                    _e('فعالسازی', $this->text_domain);
                                    ?></button>
                        <div class="result">
                            <div class="spinner"><?php 
                                    _e('لطفا صبر کنید ...', $this->text_domain);
                                    ?></div>
                            <div class="result_text"></div>
                        </div>
                    </form>

                    <div class="check_result">
                        <div class="spinner"><?php 
                                    _e('لطفا صبر کنید ...', $this->text_domain);
                                    ?></div>
                        <div class="result_text"></div>
                    </div>
                    <div class="clear"></div>
                </div>
			<?php 
                                } else {
                                    ?>
                <p><?php 
                                    _e('لطفاً قالب خود را با کلید فعالسازی ، فعال کنید تا همه ی امکانات قالب در دسترس باشد.', $this->text_domain);
                                    ?></p>
                <form action="#" method="post" class="register_version_form">
                    <input type="text" class="license_key" placeholder="<?php 
                                    _e('کلید فعالسازی', $this->text_domain);
                                    ?>">
                    <button class="button button-primary"><?php 
                                    _e('فعالسازی', $this->text_domain);
                                    ?></button>
                    <div class="result">
                        <div class="spinner"><?php 
                                    _e('لطفا صبر کنید ...', $this->text_domain);
                                    ?></div>
                        <div class="result_text"></div>
                    </div>
                </form>
			<?php 
                                }
                                ?>
            <script>
                jQuery(document).ready(function($) {
                    var ajax_url = "<?php 
                                echo admin_url('admin-ajax.php');
                                ?>";
                    jQuery(document).on('submit', '.register_version_form', function(event) {
                        event.preventDefault();
                        var starter = jQuery(this).find('.license_key').val(),
                            thisEl = jQuery(this);
                        thisEl.addClass('waiting');
                        thisEl.find('.result').slideDown(300).addClass('show');
                        thisEl.find('.button').addClass('disabled');
                        thisEl.find('.result_text').slideUp(300).html('');
                        jQuery.ajax({
                            url: ajax_url,
                            type: 'POST',
                            dataType: 'json',
                            data: {
                                action: '<?php 
                                echo $this->slug;
                                ?>',
                                starter: starter
                            },
                        })
                            .done(function(result) {
                                thisEl.find('.result_text').append(result.data).slideDown(150)
                            })
                            .fail(function(result) {
                                thisEl.find('.result_text').append('<div class="zhk_guard_danger"><?php 
                                _e('مشکلی پیش آمد لطفا دوباره امتحان کنید.', $this->text_domain);
                                ?></div>').slideDown(150)
                            })
                            .always(function(result) {
                                console.log(result);
                                thisEl.removeClass('waiting');
                                thisEl.find('.result').removeClass('show');
                                thisEl.find('.button').removeClass('disabled');
                            });
                    });

                    $(document).on('click', '.wpmlr_revalidate', function(event) {
                        event.preventDefault();
                        var starter = $(this).data('key'),
                            thisEl = $(this).parents('.current_license');
                        thisEl.addClass('waiting');
                        thisEl.find('.check_result').slideDown(300);
                        thisEl.find('.button').addClass('disabled');
                        thisEl.find('.result_text').slideUp(300).html('');
                        thisEl.find('.register_version_form').slideUp(300)
                        $.ajax({
                            url: ajax_url,
                            type: 'POST',
                            dataType: 'json',
                            data: {
                                action: '<?php 
                                echo $this->slug;
                                ?>_revalidate',
                                starter: starter
                            },
                        })
                            .done(function(result) {
                                thisEl.find('.check_result .result_text').append(result.data).slideDown(150)
                            })
                            .fail(function(result) {
                                thisEl.find('.check_result .result_text').append('<div class="wpmlr_danger"><?php 
                                _e('مشکلی پیش آمد لطفا دوباره امتحان کنید.', $this->text_domain);
                                ?></div>').slideDown(150)
                            })
                            .always(function(result) {
                                thisEl.removeClass('waiting');
                                thisEl.find('.button').removeClass('disabled');
                            });
                    });


                    $(document).on('click', '.zhk_guard_new_key', function(event) {
                        event.preventDefault();
                        var thisEl = $(this).parents('.current_license');
                        thisEl.find('.result_text').slideUp(300).html('');
                        thisEl.find('.register_version_form').slideDown(300)
                    });
                });
            </script>

        </div>
		<?php 
                            }
                            /**
                             *
                             */
                            public function wp_starter()
                            {
                                $starter = sanitize_text_field($_POST['starter']);
                                if (empty($starter)) {
                                    wp_send_json_error('<div class="zhk_guard_danger">' . __('لطفا کد فعالسازی خود را وارد کنید', $this->text_domain) . '</div>');
                                }
                                $private_session = get_option(self::$option_name);
                                delete_option($private_session);
                                $product_token = $this->product_token;
                                $result = self::install($starter, $product_token);
                                $output = '';
                                if ($result->status == 'successful') {
                                    $rand_key = md5(wp_generate_password(12, true, true));
                                    update_option(self::$option_name, $rand_key);
                                    $result = array('starter' => base64_encode($starter), 'action' => 1, 'message' => __('کدفعالسازی معتبر است.', $this->text_domain), 'timer' => time());
                                    update_option($rand_key, json_encode($result));
                                    $output = '<div class="zhk_guard_success">' . __('فعالسازی قالب انجام شده است.', $this->text_domain) . '</div>';
                                    wp_send_json_success($output);
                                } else {
                                    if (!is_object($result->message)) {
                                        $output = '<div class="zhk_guard_danger">' . $result->message . '</div>';
                                        wp_send_json_error($output);
                                    } else {
                                        foreach ($result->message as $message) {
                                            foreach ($message as $msg) {
                                                $output .= '<div class="zhk_guard_danger">' . $msg . '</div>';
                                            }
                                        }
                                        wp_send_json_error($output);
                                    }
                                }
                            }
                            /**
                             * Show admin notice for registration problems
                             */
                            public function admin_notice()
                            {
                                $private_session = get_option(self::$option_name);
                                $now = json_decode(get_option($private_session));
                                ?>
		<?php 
                                if (empty($now)) {
                                    ?>
            <div class="notice notice-error">
                <p>
					<?php 
                                    printf(__('برای فعالسازی %s کد فعالسازی خود را وارد فرمائید.', $this->text_domain), $this->name);
                                    ?>
                    <a href="<?php 
                                    echo admin_url('admin.php?page=' . $this->slug);
                                    ?>" class="button button-primary"><?php 
                                    _e('فعالسازی قالب', $this->text_domain);
                                    ?></a>
                </p>
            </div>
		<?php 
                                } elseif ($now->action != 1) {
                                    ?>
            <div class="notice notice-error">
                <p>
					<?php 
                                    printf(__('با کد فعالسازی %s شما مشکلی پیش آمده. لطفا بررسی کنید', $this->text_domain), $this->name);
                                    ?>
                    <a href="<?php 
                                    echo admin_url('admin.php?page=' . $this->slug);
                                    ?>" class="button button-primary"><?php 
                                    _e('بررسی کنید', $this->text_domain);
                                    ?></a>
                </p>
            </div>
		<?php 
                                }
                                ?>
		<?php 
                            }
                            /**
                             *  Ajax callback for check license action
                             */
                            public function revalidate_starter()
                            {
                                $starter = sanitize_text_field($_POST['starter']);
                                if (empty($starter)) {
                                    wp_send_json_error('<div class="zhk_guard_danger">' . __('لطفا کد فعالسازی خود را وارد نمائید.', $this->text_domain) . '</div>');
                                }
                                $result = self::is_valid($starter);
                                if ($result->status == 'successful') {
                                    $rand_key = md5(wp_generate_password(12, true, true));
                                    update_option(self::$option_name, $rand_key);
                                    $how = array('starter' => base64_encode($starter), 'action' => 1, 'message' => $result->message, 'timer' => time());
                                    update_option($rand_key, json_encode($how));
                                    $output = '<div class="zhk_guard_success">' . __('فعالسازی قالب انجام شده است.', $this->text_domain) . '</div>';
                                    wp_send_json_success($output);
                                } else {
                                    $rand_key = md5(wp_generate_password(12, true, true));
                                    update_option(self::$option_name, $rand_key);
                                    $how = array('starter' => base64_encode($starter), 'action' => 0, 'timer' => time());
                                    if (!is_object($result->message)) {
                                        $how['message'] = $result->message;
                                    } else {
                                        foreach ($result->message as $message) {
                                            foreach ($message as $msg) {
                                                $how['message'] = $msg;
                                            }
                                        }
                                    }
                                    update_option($rand_key, json_encode($how));
                                    $output = '<div class="zhk_guard_danger">' . $how['message'] . '</div>';
                                    wp_send_json_success($output);
                                }
                            }
                            /**
                             * Set a schedule event for daily checking
                             */
                            public function schedule_programs()
                            {
                                if (!wp_next_scheduled($this->slug . '_daily_validator')) {
                                    wp_schedule_event(time(), 'daily', $this->slug . '_daily_validator');
                                }
                            }
                            /**
                             * Check license status every day
                             */
                            public function daily_event()
                            {
                                $private_session = get_option(self::$option_name);
                                $now = json_decode(get_option($private_session));
                                if (isset($now) && !empty($now)) {
                                    $starter = isset($now->starter) && !empty($now->starter) ? base64_decode($now->starter) : '';
                                    $result = self::is_valid($starter);
                                    if ($result != null) {
                                        if ($result->status == 'successful') {
                                            delete_option($private_session);
                                            $rand_key = md5(wp_generate_password(12, true, true));
                                            update_option(self::$option_name, $rand_key);
                                            $how = array('starter' => base64_encode($starter), 'action' => 1, 'message' => $result->message, 'timer' => time());
                                            update_option($rand_key, json_encode($how));
                                        } else {
                                            delete_option($private_session);
                                            $rand_key = md5(wp_generate_password(12, true, true));
                                            update_option(self::$option_name, $rand_key);
                                            $how = array('starter' => base64_encode($starter), 'action' => 0, 'timer' => time());
                                            if (!is_object($result->message)) {
                                                $how['message'] = $result->message;
                                            } else {
                                                foreach ($result->message as $message) {
                                                    foreach ($message as $msg) {
                                                        $how['message'] = $msg;
                                                    }
                                                }
                                            }
                                            update_option($rand_key, json_encode($how));
                                        }
                                    }
                                }
                            }
                            /**
                             * Check license status
                             * If you want add an interrupt in your plugin or theme simply can use this static method: Zhkt_Guard_MarketMLM_SDK::is_activated
                             * This will return true or false for license status
                             * @return bool
                             */
                            public static function is_activated()
                            {
                                $private_session = get_option(self::$option_name);
                                $now = json_decode(get_option($private_session));
                                if (empty($now)) {
                                    return false;
                                } elseif ($now->action != 1) {
                                    return false;
                                } else {
                                    return true;
                                }
                            }
                            /**
                             * @param $method
                             * @param array $params
                             *
                             * @return array|mixed|object
                             */
                            public static function send_request($method, $params = array())
                            {
                                $param_string = http_build_query($params);
                                $ch = curl_init();
                                curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                                curl_setopt($ch, CURLOPT_URL, self::$api_url . $method . '?' . $param_string);
                                $content = curl_exec($ch);
                                return json_decode($content);
                            }
                            /**
                             * @param $license_token
                             *
                             * @return array|mixed|object
                             */
                            public static function is_valid($license_token)
                            {
                                $result = self::send_request('validation-license', array('token' => $license_token, 'domain' => self::get_host()));
                                return $result;
                            }
                            /**
                             * @param $license_token
                             * @param $product_token
                             *
                             * @return array|mixed|object
                             */
                            public static function install($license_token, $product_token)
                            {
                                $result = self::send_request('install-license', array('product_token' => $product_token, 'token' => $license_token, 'domain' => self::get_host()));
                                return $result;
                            }
                            /**
                             * @return string
                             */
                            public static function get_host()
                            {
                                $possibleHostSources = array('HTTP_X_FORWARDED_HOST', 'HTTP_HOST', 'SERVER_NAME', 'SERVER_ADDR');
                                $sourceTransformations = array("HTTP_X_FORWARDED_HOST" => function ($value) {
                                    $elements = explode(',', $value);
                                    return trim(end($elements));
                                });
                                $host = '';
                                foreach ($possibleHostSources as $source) {
                                    if (!empty($host)) {
                                        break;
                                    }
                                    if (empty($_SERVER[$source])) {
                                        continue;
                                    }
                                    $host = $_SERVER[$source];
                                    if (array_key_exists($source, $sourceTransformations)) {
                                        $host = $sourceTransformations[$source]($host);
                                    }
                                }
                                // Remove port number from host
                                $host = preg_replace('/:\\d+$/', '', $host);
                                // remove www from host
                                $host = str_ireplace('www.', '', $host);
                                return trim($host);
                            }
                            /**
                             * @param $settings
                             *
                             * @return null|Zhkt_Guard_MarketMLM_SDK
                             */
                            public static function instance($settings)
                            {
                                // Check if instance is already exists
                                if (self::$instance == null) {
                                    self::$instance = new self($settings);
                                }
                                return self::$instance;
                            }
                        }
                        add_action('init', 'Zhkt_Guard_MarketMLM_init');
                        /**
                         * Initialize function for class and hook it to wordpress init action
                         */
                        function Zhkt_Guard_MarketMLM_init()
                        {
                            $settings = [
                                'name' => '',
                                'slug' => 'mlm-zhaket-license',
                                'parent_slug' => 'mlm-wallet',
                                // Read this: https://developer.wordpress.org/reference/functions/add_submenu_page/#parameters
                                'text_domain' => 'mlm',
                                'product_token' => '6e50b7e6-c05f-498c-8846-0b54af6b232b',
                                // Get it from here: https://zhaket.com/dashboard/licenses/
                                'option_name' => 'zhkt_guard_marketmlm_register_settings',
                            ];
                            Zhkt_Guard_MarketMLM_SDK::instance($settings);
                        }
                    /* END:#8 */
                /* END:#7 */
            /* END:#6 */
        /* END:#3 */
    /* END:#2 */
/* END:#1 */
